2001-03-17  Yuuichi Teranishi  <teranisi@gohome.org>

	* icons/antenna-up.xpm: New file.

	* w3m.el (w3m-toolbar-buttons): Added "antenna".
	(w3m-toolbar): Ditto;
	Fixed behavior of `home'.

2001-03-16  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el, w3m-antenna.el: Fix typo.

2001-03-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-make-package): Remove autoloads and cus-load
	files before generating.

	* w3m.el (w3m): Added autoload cookie.
	(w3m-icon-directory): Attempt to set the default value using the
	way of Wanderlust.

2001-03-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* README: Update for `install-package' and `install-icons'.
	* README.ja: Ditto.

	* w3mhack.el (w3mhack-make-package): New function.
	(w3mhack-examine-modules): Ignore auto-save files.

	* mkinstalldirs: New file.

	* configure.in: Call `AC_PATH_PACKAGEDIR'.

	* aclocal.m4 (AC_PATH_PACKAGEDIR): New function.
	(AC_EXAMINE_PACKAGEDIR): New function.
	(AC_CHECK_EMACS_FLAVOR): Merged into `AC_CHECK_EMACS'.

	* Makefile.in (install-package): New rule.
	(install-icons, install): Exec mkinstalldirs.
	(SHELL, PACKAGEDIR): New variable.

2001-03-16  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-goto-url): Force switch to '*w3m*' buffer.
	(w3m-view-source): Don't add current-url to w3m-url-history|yrotsih.

	* mew-w3m.el (mew-w3m-cid-retrieve): Change mime-part handling.

2001-03-16  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m-antenna.el (w3m-antenna-sort-function): Removed.
	(w3m-antenna-sort-changed-sites-function): New variable.
	(w3m-antenna-sort-unchanged-sites-function): Ditto.
	(w3m-antenna-sort-sites-by-time): Refer time, when size
	modification detected.
	(w3m-about-antenna): Use new variables.

2001-03-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-time.el (w3m-time-rules): Don't use backquote.
	(w3m-time-zoneinfo): Ditto.
	(w3m-time-parse-integer): Ditto.

2001-03-16  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el (TopLevel): Require `w3m-time'.
	(w3m-w3m-attributes): Use `w3m-time-parse-string' instead of
	`parse-time-string'.

	* w3m-time.el: Import parse-time.el of T-gnus and rename it.

	* w3m-antenna.el: Use `w3m-time-parse-string' instead of
	`parse-time-string'.

2001-03-16  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-e21.el (w3m-create-image): Changed arguments spec,
	that `accept-type-regexp' is removed.

	* w3m-xmas.el (w3m-create-image): Ditto.

2001-03-16  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el: Arrived URL database format is changed and code to get
	headers and to retrieve contents is cleaned up.
	(w3m-attributes, w3m-local-attributes): New function.
	(w3m-w3m-attributes): Old name is `w3m-w3m-check-header'.
	(w3m-content-type): Use `w3m-attributes'.
	(w3m-content-charset, w3m-content-length, w3m-content-encoding,
	w3m-last-modified): New macro.
	(w3m-retrieve, w3m-local-retrieve): Changed arguments spec, that
	`accept-type-regexp' is removed.
	(w3m-w3m-retrieve): Likewise and call `w3m-w3m-attributes' instead
	of `w3m-w3m-check-header'.
	(w3m-exec): Follow change of arguments spec of `w3m-retrieve'.
	(w3m-about-source, w3m-about-header): Changed arguments spec that
	`accept-type-regexp' is removed and follow change of arguments
	spec of w3m-retrieve.
	(w3m-arrived-last-modified): New function.
	(w3m-arrived-add): Support optional argument `time' and follow
	change of database format.
	(w3m-arrived-setup, w3m-arrived-shutdown,
	w3m-arrived-store-position, w3m-arrived-restore-position): Follow
	change of database format.
	(w3m-with-work-buffer, w3m-parse-attributes): Changed
	`edebug-form-spec', see [emacs-w3m:00238].
	(TopLevel): Add autoload codes for `w3m-antenna.el'.

	* w3m-antenna.el: New file.

	* mime-w3m.el (mime-w3m-cid-retrieve): Changed arguments spec,
	that `accept-type-regexp' is removed.

	* mew-w3m.el (mew-w3m-cid-retrieve): Ditto.

2001-03-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (install-icons): New rule.
	(ICONDIR): New variable.

	* aclocal.m4 (AC_PATH_ICONDIR): New function.
	* configure.in: Call it.

2001-03-16  Yuuichi Teranishi  <teranisi@gohome.org>

	* icons: New directory (Some toolbar icons are contained).

2001-03-16  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-view-source): Render as html if already display source.

2001-03-15  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-icon-directory): New variable.
	(w3m-toolbar-buttons): New constant.
	(w3m-toolbar): Ditto.
	(w3m-setup-toolbar): Define as null function.
	(w3m-mode): Call `w3m-setup-toolbar'.

	* w3m-xmas.el (w3m-use-toolbar): New variable.
	(w3m-xmas-make-toolbar-buttons): New function.
	(w3m-setup-toolbar): Ditto.

	* w3m-e21.el (w3m-use-toolbar): New variable.
	(w3m-e21-toolbar-configurations): Ditto.
	(w3m-e21-setup-toolbar): New function.
	(w3m-e21-make-toolbar-buttons): Ditto.
	(w3m-setup-toolbar): Ditto.

2001-03-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (XEmacs): Implemented the source level optimizer for
	`let' or `let*' form to remove some obsolete variables.

2001-03-15  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* README, README.ja: Update procedure of package installation.

	* w3m.el (w3m-hook): Removed.
	(w3m-goto-mailto-url): Old name is `w3m-mailto-url'.
	(w3m-goto-ftp-url): Old name is `w3m-exec-ftp'.
	(w3m-convert-ftp-url-for-emacsen): Old name is
	`w3m-convert-ftp-to-emacsen'.
	(w3m-exec): Removed code for ftp protocol.
	(w3m-alive-p): Change spec of return value when w3m is alive.
	(w3m-goto-url): Made this function safe when it is called at the
	buffer whose major mode is not equal to w3m-mode.
	(w3m): If it is interactively called when w3m is alive, it is
	simply select the appropriate buffer in the current window without
	asking url.
	(w3m-view-parent-page, w3m-browse-url, w3m-view-source,
	w3m-history): Use `w3m-goto-url' instead of `w3m'.
	(w3m-mode-map): Replace `w3m' with `w3m-goto-url'.

2001-03-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (MULE): Make `locate-library' run quietly; bind
	defcustom'ed variables at compile-time; require `w3m' after
	byte-optimizations are done.

	* w3m.el (w3m-static-cond): New macro; use it for defining
	`find-coding-system'.
	(w3m-url-encode-string): Use `append' instead of `string-to-list'
	to coerce a string to a list of chars.
	(w3m-entity-regexp): Don't funcall `regexp-opt' directly for
	avoiding compile warning.

2001-03-15  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el (w3m-exec-process): Add `delete-process' to clean up
	resources of child process.

2001-03-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (default): Report errors if it has occurred while
	examining modules.

	* w3m.el: Add autoload for `w3m-remove-image' when compiling.
	(w3m-charset-coding-system-alist): Use `coding-system-p' if the
	function `find-coding-system' is not bound.

	* w3mhack.el: Use `require' instead of `load' for loading "w3m" to
	avoid undesirable newlines in stdout.

2001-03-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el: Require `wid-edit' when the widget `coding-system'
	is not available.

	* mime-w3m.el: Add autoload for `font-set-face-background' since it
	is not auto-autoload'ed in XEmacs.

	* w3mhack.el: Require `bytecomp'; make XEmacs don't warn for unused
	non-global variables.

2001-03-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el: Bind colon keywords only if it is not available.
	(rfc2368-parse-mailto-url):
	(w3m-form-parse-region):
	(w3m-fontify-forms): Bind them only at the compile-time as
	autoload'ed functions to avoid byte-compile warnings.

	* w3mhack.el: Byte optimize `truncate-string' for replacing with
	`truncate-string-to-width' if it is bound.

	* mew-w3m.el (mew-w3m-minor-mode-setter): Defun it after defining
	some variables.

2001-03-15  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* Makefile.in (default): Add `-k' option to continue byte-compile
	as much as possible after an error.

2001-03-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (default): Don't use `for' loop.
	* w3mhack.el (w3mhack-examine-modules): Use space instead of
	newline for the module names separator.

2001-03-14  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el: Removed functions and variables of bookmark.
	* w3m-bookmark.el: New file.
	* Makefile.in: Clean up rules and removed GNU-make depended
	functions.
	* w3mhack.el (TopLevel): Load w3m.el.
	(w3mhack-version): New function.
	* .cvsignore: Add files generated by autoconf.

2001-03-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-examine-modules): Renamed from
	`w3mhack-examine-additional-modules'.
	* Makefile.in: Ditto.

2001-03-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in, aclocal.m4, configure.in, install-sh, w3mhack.el:
	New files.
	* Makefile: Removed.

2001-03-14  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el: Split file.

	* w3m-form.el: New file.

2001-03-14  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-xmas.el (w3m-insert-image): Don't use current cursor point
	to make a new extent.

	* w3m.el (w3m-region): Call `sit-for' to redisplay before image
	display.
	(w3m-goto-url): Ditto.
	(w3m-exec-process): Use `sleep-for' instead of `sit-for'.
	(w3m-toggle-inline-images): Set cursor point before image insertion.
	(w3m-goto-url): Set cursor point before redisplay.

2001-03-14  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el (w3m-read-passwd): Removed.
	(w3m-exec-filter): Use `read-passwd' instead of `w3m-read-passwd'.

	* w3m-om.el (read-passwd): Added.

2001-03-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-om.el: Rewrite to insert "-" into the name of eol-type
	variants of each newly generated coding-system.

2001-03-14  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el: Split files.
	(w3m-coding-system): Changed customize type.
	(w3m-input-coding-system): Ditto.
	(w3m-output-coding-system): Ditto.
	(w3m-bookmark-file-coding-system): Ditto.
	(w3m-url-encode-string): Removed redundant code for Mule-2.

	* w3m-e21.el: New file.

	* w3m-xmas.el: New file.

	* w3m-om.el: New file.

	* w3m-search.el (w3m-search-default-coding-system): Changed
	customize type.
	(w3m-search-engine-alist): Ditto.

	* w3m-weather.el: Fix comments.

2001-03-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el: Use the copy of info-vector for newly generated coding-
	systems; use `eval-when-compile' separately from "cl" for loading
	"cl-macs".

2001-03-13  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el: Split files.
	* w3m-search.el: New file.
	* w3m-weather.el: New file.

2001-03-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-rendering-region): Make no exceptions of Mule 2 in
	coding-systems.
	(w3m-download): Ditto.
	(w3m-local-retrieve): Ditto.
	(w3m-exec-process): Ditto.
	(w3m-arrived-file-coding-system): Unified the default value to
	`euc-japan'.
	(w3m-bookmark-file-coding-system): Ditto.
	(w3m-default-url-coding-system): Ditto.
	(w3m-output-coding-system): Ditto.
	(w3m-coding-system): Ditto.
	(w3m-input-coding-system): Unified the default value to
	`iso-2022-jp'.
	(TopLevel): Generate some coding-systems by copying for Mule 2.
	(TopLevel): Load "cl-macs" if the macro `dolist' has been defined
	incorrectly.

2001-03-13  Masatake YAMATO  <jet@gyve.org>

	* w3m.el (w3m-url-yrotsih): New variable.
	(w3m-view-previous-page): Set w3m-url-yrotsih.
	Use while/cdr instead of nthcdr.
	(w3m-view-next-page): New function.
	(w3m-mode-map): Bind w3m-view-next-page.
	(w3m-mode): Added w3m-view-next-page and w3m-view-parent-page
	to the function document.
	(w3m-reload-this-page): Guard w3m-url-yrotsih from resetting.
	(w3m-exec): Reset yrotsih.

2001-03-13  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el (w3m-content-type-alist): [UNIX] Change method for
	text/html type.

2001-03-13  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>,
	    TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el: Require `poem' when Mule 2.3 is running.  Bind keywods
	`:case-ignore' and `:integer' for Mule 2.3.
	(coding-system-category): New alias when Mule 2.3 is running.
	(w3m-arrived-file-coding-system): Fix typo.
	(w3m-entity-alist): Fix for Mule 2.3.
	(w3m-form-method, w3m-form-action, w3m-form-plist, w3m-form-put,
	w3m-form-get): Convert to old style of macro definition.
	(w3m-fontify): Removed code to decode w3m-specific characters.
	(w3m-decode-extended-characters): New function.
	(w3m-rendering-region): Use an unibyte temporary buffer and call
	`w3m-decode-extended-characters'.

2001-03-13  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el (w3m-exec-process): Return process exit status.
	(w3m-w3m-get-header): Check the return value of w3m-exec-process.
	(w3m-w3m-check-header): Check the return value of w3m-w3m-get-header.

2001-03-13  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-exec-process): Check exit status and cause an error
	if it is not zero.

2001-03-12  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-executable-type): Use (eq system-type 'windows-nt)
	for determination of win32.
	(w3m-content-type-alist): Ditto.

2001-03-12  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el (w3m-which-command): Support executable suffix, `.exe'
	for win32.

2001-03-12  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-content-type-alist): Add 'use fiber.exe' alist for Windows.
	(w3m-w32-browser-with-fiber): New funciton.

2001-03-12  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el (w3m-which-command): New function.
	(w3m-external-view): When no viewing method is defined, call
	`w3m-download' as alternative method.  Added check which command
	exists with `w3m-which-command'.

2001-03-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-display-inline-image-status): Define as buffer local
	variable.
	(w3m-image-type): New function.
	(w3m-image-type-available-p): Ditto.
	(w3m-create-image): Check image type by `w3m-image-type-available-p'.
	(w3m-exec): Accept all content-types in `w3m-retrieve';
	Make an image only page, if the image can be displayed inline;
	Call `w3m-external-view' if the content-type of retrieved content
	is not text nor image.

2001-03-12  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-view-parent-page): Add a postfix '/' to parent-url.

2001-03-12  Takaaki MORIYAMA  <taka@airlab.cs.ritsumei.ac.jp>

	* w3m.el (w3m-extended-charcters-table): Add '\x80'.

2001-03-12  Masatake YAMATO  <masata-y@is.aist-nara.ac.jp>

	* w3m.el (w3m-view-parent-page): New command.
	(w3m-mode-map): Add `w3m-view-parent-page'.

2001-03-10  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* mime-w3m.el (mime-w3m-message-structure): Make variable buffer
	local at top leve.

2001-03-10  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-entity-alist): Eval at compile time.;
	Add character entity references for ISO 8859-1 characters.

2001-03-09  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el (w3m-entity-regexp): New constant.
	(w3m-fontify): Use `w3m-entity-regexp'.
	(w3m-entity-value): Use defsubst, and fix typo.
	(w3m-decode-anchor-string): New function.
	(w3m-fontify-anchors): Decode `&amp;' exists in URL string.

2001-03-09  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-create-image) [EMACS21,XEMACS]: Guard against error.

	* mew-w3m.el (mew-w3m-auto-insert-image): New variable.
	(mew-mime-text/html-w3m): Bind 'w3m-display-inline-image' with
	'mew-w3m-auto-insert-image'.
	(mew-w3m-cid-retrieve): New function. Fix wrong guess.

2001-03-09  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el (w3m-mode-map): Add `w3m-close-window',
	`w3m-view-source', `w3m-view-header', and `w3m-history'.  Keybind
	of `w3m-quit' is changed.
	(w3m-close-window, w3m-about-source, w3m-view-source,
	w3m-about-header, w3m-view-header, w3m-about-history,
	w3m-history): New functions.

	* mime-w3m.el (mime-put-keymap-region): Removed.
	(mime-w3m-save-background-color): Old name is
	`mime-save-background-color'.
	(mime-w3m-mode-map): Add workaround for `w3m-close-window',
	`w3m-view-source', `w3m-view-header', and `w3m-history'.

2001-03-09  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-cid-retrieve-function-alist): New variable.
	(w3m-retrieve): Add support for URLs which has `cid:' prefix.

	* mime-w3m.el: Always require `w3m'.
	Require `cl' when compiling.
	Set `w3m-cid-retrieve-function-alist'.
	(mime-w3m-message-structure): New variable.
	(mime-w3m-preview-text/html): Set `mime-w3m-message-structure'.
	(mime-w3m-cid-retrieve): New function.

2001-03-09  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-toggle-inline-images): Eliminated needless local
	variable.
	(toplevel): Encloses old emacs judgement with eval-and-compile;
	Define `find-coding-system' using `w3m-static-if'.

2001-03-08  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el: All w3m-backlog-* symbols are renamed into w3m-cache-*,
	and coupling of retrieve module and cache module are cleand up.
	(w3m-keep-cache-size): Old name is `w3m-keep-backlog'.
	(w3m-cache-buffer, w3m-cache-articles, w3m-cache-hashtb,
	w3m-cache-setup, w3m-cache-shutdown, w3m-cache-contents,
	w3m-cache-request-contents): These symbols are renamed.
	(w3m-cache-header, w3m-cache-request-header): New function.
	(w3m-work-buffer-list): New variable.
	(w3m-get-buffer-create): New function.
	(w3m-with-work-buffer): New macro.
	(w3m-kill-all-buffer): New function.
	(w3m-create-image, w3m-local-retrieve): Use `w3m-with-work-buffer'
	instead of `with-current-buffer'.
	(w3m-arrived-setup): Set `w3m-input-url-history' when its value is
	nil.
	(w3m-arrived-shutdown): More strict error check.  This function is
	added to `kill-emacs-hook'.
	(w3m-w3m-get-header): New function.
	(w3m-w3m-check-header): Use `w3m-w3m-get-header'.
	(w3m-w3m-retrieve): Clean up code.
	(w3m-download, w3m-exec): More strict error check.
	(w3m-content-type): New optional argument `no-cache' is added.
	(w3m-alive-p): New function.
	(w3m-quit): Use `w3m-alive-p'.

2001-03-08  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-local-retrieve): Bind 'auto conversion variables' to
	nil when insert file with binary .

2001-03-08  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-insert-image): Eliminated needless local variable.
	(w3m-remove-image) [XEmacs]: Remove images at `end' too.
	(w3m-fontify-images): Set `w3m-image-redundant' property
	if "img_alt" string is upper case.
	(w3m-toggle-inline-images): Fixed docstring;
	Insert and remove dummy string if alt string has `w3m-image-redundant'
	property.

2001-03-08  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-fontify): Allow '_' char for element name.

2001-03-08  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-display-inline-image-status): New variable.
	(w3m-image-type-alist): Define as constant.
	(w3m-anchor): Moved position.
	(w3m-image): Ditto.
	(w3m-action): Ditto.
	(w3m-create-image): Added argument `no-cache'.
	(w3m-remove-image): New function.
	(w3m-fontify-images): Don't display inline image here.
	(w3m-toggle-inline-images): New function.
	(w3m-mode-map): Bind 't' to `w3m-toggle-inline-images'.
	(w3m-goto-url): Call `w3m-toggle-inline-images';
	Set `w3m-display-inline-image-status'.
	(w3m-region): Ditto.

2001-03-08  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>

	* mime-w3m.el (mime-w3m-preview-text/html): Use
	`mime-entity-fetch-field' instead of `mime-w3m-get-xref'.
	(mime-w3m-get-xref): Removed.

2001-03-07  Keisuke Nishida  <kxn30@po.cwru.edu>

	* w3m.el (w3m-search-engine-alist): Added "rpmfind".
	(w3m-fontify-anchors): Treat single quotes (') as quotation marks.

2001-03-08  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el: Backlog module is separated from front-end functions and
	code to access the list of arrived URLs is put in order.
	(w3m-arrived-file): Renamed from `w3m-arrived-urls-file'.
	(w3m-arrived-anchor-list): Removed variable.
	(w3m-arrived-list-load, w3m-arrived-list-save,
	w3m-arrived-list-add, w3m-save-position, w3m-restore-position):
	Removed functions.
	(w3m-arrived-db-size): New constant.
	(w3m-arrived-db, w3m-arrived-seq): New variables.
	(w3m-arrived-p, w3m-arrived-add, w3m-arrived-setup,
	w3m-arrived-shutdown, w3m-arrived-store-position,
	w3m-arrived-restore-position): New functions.
	(w3m-input-url): Follow changes.
	(w3m-view-previous-page): Ditto.
	(w3m-view-previous-point): Ditto.
	(w3m-quit): Ditto.
	(w3m-goto-url): Ditto.
	(w3m-create-image): Clean up codes.

2001-03-07  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-view-current-url-with-external-browser): Fix typo when
	browse current URL.

2001-03-07  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-create-image) [XEmacs]: Retrieve header to determine
	image type when `w3m-local-content-type' failed.

2001-03-07  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el (w3m-arrived-file-coding-system): Default value is
	changed to avoid unknown coding system error on XEmacs.
	(w3m-input-url): Changed for old style `completing-read'.

2001-03-07  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-download): Bind 'auto conversion variables' to nil.
	(w3m-w3m-check-header): Fix search 'HTTP/1.[01] 200' method.
	(inline-image-features): Patch from Yuuichi Teranishi san
	<teranisi@gohome.org> at [emacs-w3m:00103].

2001-03-07  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* mime-w3m.el: Renamed mime-w3m-preview-text/html from
	w3m-mime-preview-text/html.  Check of user setting is required.
	(mime-w3m-mode-map): New variable.
	(mime-w3m-get-xref): New function.
	(mime-w3m-view-this-url): Ditto.
	(mime-w3m-mouse-view-this-url): Ditto.
	(mime-w3m-preview-text/html): Use `mime-w3m-mode-map' insted of
	`w3m-mode-map'.  Refer Xref: header to set `w3m-current-url'.
	(mime-put-keymap-region): Define with `defmacro' instead of `defmacro-maybe'.
	(mime-save-background-color): Ditto.

	* w3m.el (w3m-exec-filter): Improved code to process prompt string.

2001-03-06  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-exec-filter): Delete Prompt string with process output
	buffer.
	(w3m-w3m-check-header): Check 'HTTP/1.[01] 200' for valid
	'content-length'.
	(w3m-w3m-retrieve): Cygwin binary data support. Remove Prompt
	handling.

2001-03-06  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el (emacs-w3m-version): New constant.
	(find-coding-system): Removed duplicated definition.
	(w3m-backlog-remove-oldest): Simplify.
	(w3m-search): Fix typo in function document.

2001-03-05  Keisuke Nishida  <kxn30@po.cwru.edu>

	* w3m.el (w3m-anchor, w3m-image, w3m-action): Use defsubst.

2001-03-05  Keisuke Nishida  <kxn30@po.cwru.edu>

	* w3m.el (and-let*): Removed
	(w3m-save-this-url): Updated.

2001-03-06  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-goto-previous-anchor): Fix mistake on merging
	w3-anchor patch. Cursor should go to beginning of anchor previous.
	(w3m-mode-map): Assign Shift-TAB key with w3m-previous-anchor.

2001-03-06  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (TOP): No need to load cl-macs explicitly.
	(w3m-charset-coding-system-alist): Do not use doloop in defcustom
	because it is not expanded in compile time.

2001-03-05  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el: apply patch from Keisuke Nishida.
	URL is hold in text property as already expanded.
	Some utility functions (w3m-anchor, w3m-image, w3m-action) is
	defined and used.
	(and-let*): New macro.
	(w3m-fontify-anchors): Hold expanded url in text property.
	(w3m-fontify-images): Likewise.
	(w3m-expand-url): Save matching data.
	Match pattern bug fix (by gotoh).
	(w3m-anchor): New function.
	(w3m-image): New function.
	(w3m-action): New function. (added by gotoh)
	(w3m-view-this-url): Use new functions to extract text prop.
	(w3m-mouse-view-this-url): Likewise.
	(w3m-download-this-url): Likewise.
	(w3m-print-this-url): Likewise.
	(w3m-save-this-url): Likewise.
	(w3m-goto-next-anchor): Likewise, and do not expand url.
	(w3m-external-view): Remove 1st arg CONTENT-TYPE.
	(w3m-next-anchor): Use and-let* macro and do not expand url.
	(w3m-goto-previous-anchor): Use utility functions.
	(w3m-bookmark-add-this-url): Likewise and refine.
	(w3m-url-encode-string): Do not escape ':' and '/'.

2001-03-05  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el (w3m-retrieve): Add support for URLs which has `about:'
	prefix.
	(w3m-content-type): Likewise.
	(w3m-about, w3m-about-weather, w3m-weather,
	w3m-weather-remove-headers, w3m-weather-remove-footers,
	w3m-weather-remove-weather-images,
	w3m-weather-remove-washing-images,
	w3m-weather-remove-futon-images,
	w3m-weather-remove-week-weather-images, w3m-weather-insert-title):
	New function.
	(w3m-weather-url-alist): New associative list of AREA vs. URL.
	(w3m-weather-default-area): New customize variable.
	(w3m-weather-default-area): Ditto.
	(w3m-entity-value): When unknown entity is specified, return
	original string instead of null string.

2001-03-05  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el (w3m-url-encode-string): New function.
	(w3m-escape-query-string): Use `w3m-url-encode-string'.
	(w3m-form-make-get-string): Ditto.
	(w3m-message): Changed to support Emacs-19.
	(w3m-parse-attributes): Ditto.
	(w3m-fontify): Refer `mc-flag' when mule is used.

2001-03-05  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-command-arguments): Make it as system constants user
	not for user variable. User need not change this value.  "-S"
	options is removed because it doesn't work for non Text/Plain
	object.
	(w3m-default-url-coding-system): New variable.
	(w3m-search-engine-alist): Change format to hold encoding type
	for query string. And add some engines.
	(w3m-fill-column): Born again variable. Positive value is for
	fixed column, negative value is for fitting frame width.
	(w3m-mode): Add key description of "<" and ">" in doc-string.
	(w3m-escape-query-string): Add 2nd argument for coding system.
	(w3m-search): Adapt to new format of w3m-search-engine-alist.

2001-03-05  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-sub-list): Guard error for XEmacs (N must count from
	zero).

2001-03-05  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el (w3m-search): Simplify.
	(w3m-do-search): Removed.

2001-03-05  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* Merge form branch to main trunk.

2001-03-05  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el (w3m-form-new): Changed w3m-form structure.
	(w3m-form-p): Likewise.
	(w3m-form-put): Likewise.
	(w3m-form-get): Likewise.
	(w3m-form-plist): New macro.
	(w3m-form-symbol): Removed.
	(w3m-url-encode): Ditto.
	(w3m-form-make-get-string): Follow change of w3m-form and use
	w3m-escape-query-string instead of w3m-url-encode.
	(w3m-parse-attributes): New macro.
	(w3m-form-parse-region): Use w3m-parse-attributes.
	(w3m-fontify-forms): Use w3m-parse-attributes.

2001-03-05  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-content-type-alist): Add some content-type.
	(w3m-w3m-retrieve): Change bind variables method to 'let*'.

2001-03-05  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-command-arguments): Add "-S" option for w3m.
	(w3m-search-engine-alist): Add new spec for google with JA lang.
	(w3m-current-url): Make variable buffer local at top leve.
	(w3m-current-title): Likewise.
	(w3m-url-history): Likewise.
	(w3m-process-temp-file): Likewise.
	(w3m-rendering-region): Do not make local variable for the reason
	above.
	(w3m-exec): Likewise.
	(w3m-external-view): Likewise.
	(w3m-goto-next-anchor): Bug fix.
	(w3m-goto-previous-anchor): Bug fix.
	(w3m-escape-query-string): Bug: Escape SPC char as "+" not "%20".

2001-03-04  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el (w3m-form-string-regexp): Add `eval-and-compile' to
	suprress byte-compile error.
	(w3m-form-p): Fix typo.
	(w3m-mode-map): Swapped keybindings of w3m-scroll-left and
	w3m-scroll-right to fit w3m's keybindings.

2001-03-04  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el: Add Keisuke Nishida as author.
	(TOP): Use thingatpt instead of ffap.
	(w3m-fill-column): Obsoleted. Determine in dynamic.
	(w3m-command-arguments): Specify as lambda
	(w3m-command-arguments): Change initial value.
	(w3m-search-engine-alist): Change spec more simple.
	(w3m-input-url): Use thing-at-point.
	(w3m-do-search): Adapt to new w3m-search-engine-alist spec.
	(w3m-search): Change variable name and refine codes.

	* w3m.el: (w3m-entity-value): Allow immediate entity (&#nnn).
	(w3m-fontify): Likewise.

2001-03-04  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-delete-duplicated-empty-lines): New variable.
	(w3m-search-engine-alist): New variable.
	(w3m-default-search-engine): New variable.
	(w3m-horizontal-scroll-columns): New variable.
	(w3m-fontify): Change regexp to allow non-double-quoted string for
	href attribute value of anchor tag. Remove duplicated empty lines
	for compact view.
	(w3m-mode-map): Add keymap "<" and ">" to scroll horizontaly.
	(w3m-mode): Truncate lines.
	(w3m-scroll-left): New interactive function.
	(w3m-scroll-right): New interactive function.
	(w3m-escape-query-string): New function.
	(w3m-do-search): New function.
	(w3m-search): New interactive function for searching word with
	various search engine.

2001-03-04  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el: Start implementation of code to process <form> tag.
	(w3m-form-face): New face.
	(w3m-current-forms): New internal variable.
	(w3m-form-string-regexp): New internal constant.
	(w3m-form-new, w3m-form-p, w3m-form-symbol, w3m-form-method,
	w3m-form-action, w3m-form-put, w3m-form-get, w3m-url-encode,
	w3m-form-make-get-string, w3m-form-parse-region,
	w3m-fontify-forms, w3m-form-replace, w3m-form-input,
	w3m-form-submit, w3m-form-real-reset, w3m-form-reset,
	w3m-fontify-bold, w3m-fontify-underline, w3m-fontify-images):
	New function.
	(w3m-fontify): Use new functions.
	(w3m-mode-map): Add scroll-right and scroll-left.
	(w3m-mode): Set t to `truncate-line'.

2001-03-04  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el: Patch from Keisuke Nishida <kxn30@po.cwru.edu>.
	(w3m-print-this-url): Do not save URL, print only.
	(w3m-save-this-url): New function. Print and save URL under cursor.
	(w3m-goto-next-anchor): New function.
	(w3m-next-anchor): Move to top anchor from bottom.
	Print URL after move.
	(w3m-goto-previous-anchor): New function.
	(w3m-previous-anchor): Move to bottom anchor from top.
	Print URL after move.

2001-03-04  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el: Patch from Keisuke Nishida <kxn30@po.cwru.edu>.
	(TOP): Require ffap.el.
	(w3m-input-url): Prompt with default URL, and use URL under cursor
	as default if not specified.
	(w3m): Do not specify default url for w3m-input-url.

2001-03-02  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el (w3m-backlog-enter): Overwrite backlog data when
	specified URL is duplicated.
	(w3m-home-page): Changed official emacs-w3m page's address to
	namazu.org.

2001-03-02  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el: Renamed w3m-http-* to w3m-w3m-* in order to prepare name
	space of symbols processing HTTP protocol directly, and fix for
	cookie.
	(w3m-w3m-check-header): Renamed from `w3m-http-check-header'.
	(w3m-w3m-retrieve): Renamed from `w3m-http-retrieve' and added
	code to remove cookies.
	(w3m-retrieve): Follow changes of fuction name.
	(w3m-download): Likewise and changed argument spec.
	(w3m-exec): Changed argument spec.
	(w3m-goto-url): Changed reload scheme,
	(w3m-fontify): Move point to the top of the buffer before delete
	<?xml ... ?> tag.

2001-03-02  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el (TOP): Changed code to detect XEmacs and add to define
	`find-coding-system'.
	(w3m-backlog-setup): Changed caching data format.
	(w3m-backlog-enter): Ditto and changed argument spec.
	(w3m-backlog-request): Ditto and changed spec of return value.
	(w3m-http-retrieve): Access backlog in this function and changed
	argument spec.
	(w3m-retrieve): Changed argument spec.
	(w3m-exec): Clean up and chaned spec of return value.
	(w3m-goto-url): Follow changes in `w3m-exec'.
	(w3m-decode-buffer): Clean up.
	(w3m-process-temp-file): New variable to suppress byte-compile warning.
	(w3m-external-view): Use w3m-process-temp-file to suppress
	byte-compile warning.
	(w3m): Change `mode-line-buffer-identification'.

2001-03-02  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-home-page): Initialize as URL.

2001-03-02  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el: Correcting wrong use of cygwin type filename usage,
	using dolist macro, adding handling codes html character entities,
	correct bug of w3m-view-bookmark on win32 environment, 
	fixing some small bugs, etc.
	(w3m-url-to-file-name): New function.
	(w3m-expand-file-name-as-url): Renamed from w3m-expand-file-name.
	(w3m-bookmark-file): Initialize as native filename format.
	(w3m-arrived-urls-file): Likewise.
	(w3m-charset-coding-system-alist): Use dolist macro.
	(w3m-entity-alist): New constant.
	(w3m-entity-db): New variable.
	(w3m-entity-db-size): New variable.
	(w3m-entity-db-setup): New function.
	(w3m-entity-value): New function
	(w3m-fontify): Refine html character entity decoding.
	Use dolist macro. Some bug fix.
	(w3m-exec-get-user): Simplify using dolist macro.
	(w3m-bookmark-save): Likewise.
	(w3m-local-content-type): Likewise.
	(w3m-local-retrieve): Fix filename handling considering cygwin
	convention by using w3m-local-file-name function.
	(w3m-http-retrieve): Buf fix.
	(w3m-rendering-region): Bug fix, use w3m-current-url.
	(w3m-view-bookmark): Use w3m to do initialize on interactive call.
	(w3m-find-file): Fix for renamed function.

2001-03-01  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* Merge changes on `url' branch to main trunk.

2001-03-01  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el (w3m-home-page): Changed to official w3m.el page.
	(w3m-anchor-face): Changed default face in dark backgraound.
	(w3m-arrived-anchor-face): Ditto.
	(w3m-download): Fix typo.
	(w3m-content-type-alist): Accept .png file.
	(w3m-external-view): Fix typo.
	(w3m-view-image): Fix.

2001-03-01  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* mew-w3m.el: New file to use w3m with Mew.

2001-03-01  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* mime-w3m.el: New file to use w3m with SEMI.

	* w3m.el (w3m-message): New function.
	(w3m-verbose): New variable.
	(w3m-process-message): Ditto.
	(w3m-process-url): Removed.
	(w3m-exec-process): Add code to show progress status.
	(w3m-exec-filter): Fix prompt bug and clean up codes.
	(w3m-retrieve): Changed arguments spec.
	(w3m-local-retrieve): Ditto.
	(w3m-http-retrieve): Ditto.
	(w3m-pretty-length): New function.
	(w3m-rendering-region): Add code to show progress status.

2001-03-01  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el (w3m-http-retrieve): Add adhoc fragment to avoid new-line
	replacement.
	(w3m-decode-buffer): Renamed from w3m-html-decode-buffer.

2001-02-28  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el (w3m-content-type-alist): Accept .htm as text/html.
	(w3m-backlog-enter): Add code to memory w3m-current-title.
	(w3m-backlog-request): Resume w3m-current-title from backlog data.
	(w3m-html-decode-buffer): Change arguments spec.
	(w3m-rendering-region): Removed code to set w3m-current-url.
	(w3m-exec): Fix bug of proecessing text/plain files and changed
	data format to preserve in backlog.

2001-02-28  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el: Support XEmacs using APEL.
	(w3m-fontify): Delete <?XML ... ?> tag for XHTML page.
	(w3m-input-url): Do not use 7th arg of completing-read
	for XEmacs support.
	(w3m-bookmark-save): Check bookmark file is writable.

2001-02-28  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-bookmark-add): Fix problem of adding bookmark first
	time.

2001-02-28  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el: Reconstructed drastically and removed w3 depended codes.

2001-02-28  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-executable-type): New variable.
	(w3m-cygwin-path): New function.
	(w3m-region): New function.

2001-02-26  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el (w3m-fontify): Add code to decode w3m-specific extended
	charcters.
	(w3m-extended-charcters-table): New constant.

2001-02-08  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-async-exec): New customizable variable.
	(w3m-exec-process): Use 'w3m-async-exec' instead of 'w3m-process-type'.

2001-02-07  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el: Fixed small and thoughtless bugs...
	(w3m-bookmark-file-modified-p): Bug fix.
	(w3m-bookmark-save): Bug fix. Don't forget time stamp updating.
	(w3m-bookmark-add): Bug fix. Function name miss-typing.

2001-02-07  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el: Add bookmark operations. This feature is very ad-hoc.
	Support loading w3m's bookmark file into internal bookmark data,
	adding new entry interactively, and saving data as w3m's bookmark
	file format. 
	(w3m-bookmark-file-coding-system): New user varible.
	(w3m-bookmark-data): New internal variable.
	(w3m-bookmark-file-time-stamp): ditto.
	(w3m-bookmark-section-history): ditto.
	(w3m-bookmark-title-history): ditto.
	(w3m-mode-map): Add bookmark operation functions to mode map.
	(w3m-bookmark-file-modified-p): New function.
	(w3m-bookmark-parse): ditto.
	(w3m-bookmark-load): ditto.
	(w3m-bookmark-save): ditto.
	(w3m-bookmark-data-prepare): ditto.
	(w3m-bookmark-add): ditto.
	(w3m-bookmark-add-this-url): ditto.
	(w3m-bookmark-add-current-url): ditto.

2000-12-12  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-sub-list, w3m-load-list, w3m-save-list): New utility
	function.
	(w3m-arrived-list-load): Refine and move out common code into
	w3m-load-list.
	(w3m-arrived-list-save): Refine and move out common code into
	w3m-save-list and w3m-sub-list. (Previous code had side effect
	of nreverse).

2000-12-10  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* makepatch.pl, Makefile, .cvsignore: New files.

2000-10-26  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-view-this-url): Chang optinal argument 'arg'.
	(w3m-next-anchor, w3m-previous-anchor): Bind 'pos'.
	(w3m-fontify): Put mouse-face at anchor and image property.
	(w3m-mouse-view-this-url): Handling 'w3m-image property.

2000-10-20  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-process-type): Change default valule to 'start-process.
	(w3m-process-user-counter): New buffer local variable.
	(w3m-exec-get-user): New funciton, get user and passwd from
	w3m-arrived-user-list.
	(w3m-exec-filter): Use w3m-exec-get-user().

2000-10-18  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-view-previous-point): New function.
	(w3m-expand-url): If BASE is nil, it set "".
	(w3m-download-this-url): w3m-refontify-anchor() exec when finished
	download.

2000-10-16  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-arrived-ct-file, w3m-arrived-file-cs,
	w3m-always-html-url-regex): New variables.
	(w3m-process-type): Change name from w3m-exec-process-type.
	(w3m-refontify-anchor): New funcition.
	(w3m-exec): Pre-check content-type.
	(w3m-exec-w3m-ctcheck): New funcition, check context-type for URL.
	(w3m-exec-w3m): New funcion, execute w3m.
	(w3m-exec-ftp): New function, execute dired-other-window() or
	copy-file(), if URL is 'ftp://'.
	(w3m-convert-ftp-to-emacsen): Change 'ftp://' to '/user@host:/' from
	elisp ML.
	(w3m-download-this-url, w3m-save-image, w3-view-image): Use w3
	features.
	
2000-10-12  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (top-level): Add authors.
	(w3m-expand-url): Check relative URL first.
	(w3m-fontify): Add original text properties when replace 'escaped
	character'.

2000-10-11  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-mailto-url-function, w3m-use-cygdrive,
	w3m-default-save-dir, w3m-arrived-list-file, w3m-arrived-list-keep,
	w3m-arrived-anchor-face, w3m-exec-process-type,
	w3m-process-connection-type, w3m-arrived-anchor-list):
	New user custumize variables.
	(w3m-mode): Change doc-string for key binding.
	(w3m-arrived-list-add, w3m-arrived-list-load, w3m-arrived-list-save):
	New functions for handling arrived anchor.
	(w3m-fontify): Add arrived anchor face.
	(w3m-exec-process, w3m-exec-filter, w3m-exec-sentinel): New functions
	for asynchronous w3m execution.
	(w3m-find-file, w3m-read-file-name, w3m-read-passwd):
	New miscellaneous functions.
	(w3m-expand-file-name): Support old cygwin.
	(w3m-view-current-url-with-external-browser): If w3m-browser-command
	is function, funcall it.
	(w3m-mailto-url): If w3m-mailto-url-function is function, funcall it.
	(w3m-mode-map): If running xemacs, use (button2) instead of (mouse-2).

2000-09-21  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m): Cancel last change, use switch-to-buffer again.

2000-09-20  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m): Do not switch buffer if w3m window already exists.

2000-09-20  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el: Add declaration of dependency on APEL.
	(w3m-quit): When other w3m buffers exist, don't destruct cache.
	(w3m-browse-url): New function.

2000-09-20  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-command-arguments): Remove option -m, that's not good
	for bookmark / local file handling.

2000-09-19  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-command-arguments): Add -m option explicitly.
	(w3m-exec): Ad-hoc change to view .txt object. It's temporary
	fix. Should we consider type? w3m option -dump_head may help us.
	(w3m-exec): Get title and remove both format <title_alt> and
	<title>.
	(w3m-view-this-url): Force reloading by prefix.
	(w3m-view-current-url-with-external-browser): Works correctly.
	(w3m-print-current-url): Push url to kill king to paste later.
	(w3m-print-this-url): ditto.
	(w3m-mailto-url): Use rfc2368.el instead of mailto.el.
	(w3m-goto-url): Add 2nd argument RELOAD to withdraw data cached on
	emacs.
	(w3m-reload-this-page): Simplified by using new w3m-goto-url.
	(w3m): Set mode-line-buffer-identification after changing major
	mode because it overwrite that variable.

2000-09-19  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el (w3m-fontify): Add code to handle irregular ordered
	elements of anchor tags.
	(w3m-mailto-url): Adopt for Emacs-19.
	(w3m-input-url): Call `w3m-backlog-setup' to initialize
	`w3m-backlog-hashtb'.

2000-09-19  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m): Sorry, over paren.

2000-09-18  Shun-ichi GOTO  <gotoh@taiyo.co.jp>
	
	* w3m.el (w3m-exec): Get title correctly within -halfdump format
	of w3m.
	(w3m-mouse-view-this-url): New function to view page by clicking
	mouse middle button.
	(w3m-mode-map): Assign mouse middle button to view page.
	(w3m): Change mode-line spec to show title of current page.

2000-09-18  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el: Add authors.

2000-09-18  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-input-url): Enter url with completion. Candidates
	are visited url kept in w3m-backlog-hashtb.
	(w3m-backlog-setup): Change hash size as prime number and
	initialized with value 0 for obarray.
	(w3m-backlog-remove): Remove unused 2nd arg NUMBER and remove when
	block to check NUMBER.
	(w3m-exec): Show message "Loading..." while loading.
	(w3m-save-position): New function to keep display position in
	Emacs window into hash symbol, but I think this is not best way.
	(w3m-restore-position): New function to restore display position.
	(w3m-view-previous-page): Restore display position.
	(w3m-expand-url): Canonicalize url, ex. "http://www.host.org" to
	"http://www.host.org/".  Change regexp to allow "mailto:"
	protocol.  Remove drive letter as side-effect using
	expand-file-name to expand url for Win32 emacen.
	(w3m-expand-file-name): New function to alternates
	expand-file-name function with convert drive letter prefixed path
	to cygwin path.  i.e. c:/users/home to /cygdrive/c/users/home
	(w3m-view-bookmark): Expand bookmark filename as cygwin path
	format to pass to w3m.
	(w3m-mode-map): Add new key binding 'B' to back to previous page.
	Add new key binding 'R' to force reloading current page.
	(w3m-mailto-url): New function to support mailto: protocol.  It
	use rfc2368.el if available.
	(w3m-goto-url): Ad-hoc support mailto: protocol. We should
	consider more...
	(w3m-reload-this-page): New function to reload current page.

2000-09-18  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m): Add 2nd arguemnt to use with browse url.  This is
	patch from Satoru Takabayashi <satoru-t@is.aist-nara.ac.jp> in
	ELF-ML, Seq# 875.
	(w3m-fontify): Change regexp for <a ...> tag to allow newline in
	between attributes.  This is patch from Satoru Takabayashi
	<satoru-t@is.aist-nara.ac.jp> in ELF-ML, Seq# 876.
	(w3m-fontify): Allow un-ended tag for name attribute, is it w3m
	bug?).  This is Patch from Satoru Takabayashi
	<satoru-t@is.aist-nara.ac.jp> in ELF-ML, Seq# 876.

2000-07-13  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el: Added handling of name anchors. Add comments.

2000-07-12  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el: Improved to handle multi buffer. Fix broken cache and
	order of fontify.

2000-07-01  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el: Handle &-sequence. Add history and cache.

2000-06-25  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el: New file.
