2002-08-29  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-select-buffer-hook): Renamed from
	`w3m-change-buffer-hook'.
	(w3m-next-buffer): Accept a numerical argument.
	(w3m-previous-buffer): Accept a numerical argument, and call
	`w3m-next-buffer'.
	(w3m-delete-buffer): Call `w3m-next-buffer' instead of
	`w3m-previous-buffer'.

	* w3m.el (w3m-delete-buffer-hook): Change its default value.
	(w3m-change-buffer-hook): New option.
	(w3m-delete-other-buffers-hook, w3m-previous-buffer-hook,
	w3m-next-buffer-hook): Abolished.
	(w3m-next-buffer): Run `w3m-change-buffer-hook' instead of
	`w3m-next-buffer-hook'.
	(w3m-previous-buffer): Run `w3m-change-buffer-hook' instead of
	`w3m-previous-buffer-hook'.
	(w3m-delete-buffer): Not call `w3m-select-buffer-update', which is
	added to `w3m-delete-buffer-hook'.
	(w3m-delete-other-buffers): Likewise.  Run
	`w3m-delete-buffer-hook' instead of `w3m-delete-other-buffers-hook'.

2002-08-28  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (toplevel): Remove expressions to register hook functions
	to `w3m-delete-buffer-hook', `w3m-delete-other-buffers-hook',
	`w3m-display-hook', and `w3m-fontify-after-hook'.
	(w3m-mode-hook, w3m-fontify-after-hookk, w3m-display-hook,
	w3m-arrived-setup-hook, w3m-arrived-shutdown-hook,
	w3m-delete-buffer-hook, w3m-delete-other-buffers-hook,
	w3m-previous-buffer-hook, w3m-next-buffer-hook): Changed their
	default values to avoid inconsistency of their customize.
	(w3m-toolbar): Fix its help messages.
	(w3m-arrived-file, w3m-keep-arrived-urls,
	w3m-db-history-display-size): Fix their docstrings.
	(w3m-history): Moved to avoid a byte compile warning.

	* w3m-xmas.el (toplevel): Remove an expression to register
	`w3m-xmas-update-tab-in-gutter' to `w3m-display-hook'.
	(w3m-xmas-show-current-title-in-buffer-tab): Remove expressions to
	handle `w3m-display-hook' from the form to change its value.

	* w3m-e21.el (toplevel): Remove expressions to register hook
	functions to `w3m-display-hook', `w3m-arrived-setup-hook',
	`w3m-arrived-shutdown-hook', `w3m-mode-hook',
	`w3m-fontify-after-hook', `w3m-next-buffer-hook',
	`w3m-previous-buffer-hook', `w3m-delete-buffer-hook' and
	`w3m-delete-other-buffers-hook'.

2002-08-28  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-delete-buffer-hook): New hook.
	(w3m-other-delete-buffers-hook): Ditto.
	(w3m-previous-buffer-hook): Ditto.
	(w3m-next-buffer-hook): Ditto.
	(w3m-view-this-url-new-session-in-background): Fixed docstring.
	(w3m-next-buffer): Run `w3m-next-buffer-hook'.
	(w3m-previous-buffer): Run `w3m-previous-buffer-hook'.
	(w3m-delete-buffer): Run `w3m-delete-buffer-hook'.
	(w3m-delete-other-buffers): Run `w3m-delete-other-buffers-hook'.
	(w3m-pack-buffer-numbers): New function.
	(w3m-delete-buffer-hook): Add `w3m-pack-buffer-numbers'.
	(w3m-delete-other-buffer-hook): Add `w3m-pack-buffer-numbers'.

	* w3m-util.el (w3m-buffer-number): New inline function.
	(w3m-buffer-set-number): Ditto.

	* w3m-e21.el (w3m-update-tab-line): New function.
	(w3m-mode-hook): Add `w3m-update-tab-line'.
	(w3m-fontify-after-hook): Ditto.
	(w3m-previous-buffer-hook): Ditto.
	(w3m-next-buffer-hook): Ditto.
	(w3m-delete-buffer-hook): Ditto.
	(w3m-delete-other-buffers-hook): Ditto.
	(w3m-tab-width): Changed default value to 16.
	(w3m-tab-line): Calculate tab width dynamically.

2002-08-27  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-output-coding-system,
	w3m-halfdump-command-arguments): Use 'utf-8 when `w3m-m17n'
	with Mule-UCS environment.
	(w3m-charset-coding-system-alist): Add Windows Code Point.
	(w3m-current-content-charset): New buffer-local variable.
	(w3m-clear-local-variables, w3m-copy-local-variables): Handle it.
	(w3m-decode-buffer): Set `w3m-current-content-charset'.
	(w3m-rendering-half-dump): Use
	`w3m-current-content-charset' when `w3m-m17n' or `w3mmee'.

2002-08-27  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-mhonarc.el (shimbun-make-contents): Encode the value
	of X-From-R13 before it is refered as the from address.

2002-08-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-lynx-like-map): Change the key `C-c w' to `C-c M-w'
	for the command `w3m-delete-other-buffers'.
	(w3m-info-like-map): Ditto.

2002-08-27  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (emacs-w3m-version): Reset for development series toward
	emacs-w3m-1.4.

2002-08-27  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-history): Call `w3m-db-history' instead of goto
	`about://db-history/'.

2002-08-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-delete-other-buffers): New user command.
	(w3m-lynx-like-map): Bind the key `C-c w' to the command
	`w3m-delete-other-buffers'.
	(w3m-info-like-map): Ditto.
	(w3m-select-buffer-mode-map): Bind the key to the command
	`w3m-select-buffer-delete-other-buffers'.
	(w3m-select-buffer-delete-other-buffers): New user command.

2002-08-27  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-check-header-tags): Ignore case of tags.
	(w3m-about-db-history): Accept range specification in URL.
	(w3m-db-history-display-size): New option.
	(w3m-db-history): Refer it.

	* w3m-antenna.el (w3m-antenna-html-skeleton): Add link to
	about://antenna-edit/.
	(w3m-about-antenna-edit): New function.  This is an experimental
	imprement of the editor for Antenna sites.

2002-08-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (char-after): Byte-optimize it for old Emacsen.
	(char-before): Ditto.

2002-08-26  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-mhonarc.el (shimbun-mhonarc-rot13-table): New
	constant.
	(shimbun-mhonarc-rot13-decode): New function.
	(shimbun-make-contents): Call the above function to decode the
	field of X-From-R13.

2002-08-23  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-view-this-url-new-session-in-background):
	New user option.
	(w3m-view-this-url-1): Use it; enclose `w3m-goto-url' with
	`save-window-excursion'.

	* w3m-form.el (w3m-form-resume): Confirm `value' for text form
	is a string.

2002-08-22  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (ffap-url-regexp): Fix last change.

2002-08-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (ffap-url-regexp): Modify the value to make it match to
	nntp urls.

2002-08-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (very-slow): New rule.

	* attic/addpath.el: New file.

2002-08-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-e21.el: Require `cl' when compiling to provide the function
	`gensym'.  It is needed to byte-compile this file alone because of
	the w3m-proc macros.
	* w3m-image.el: Ditto.
	* w3m-bitmap.el: Don't bother to load cl-macs.

2002-08-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-util.el (w3m-display-message-enable-logging): New variable.
	(w3m-display-message): Use it.

2002-08-21  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (mew-shimbun-scan): Support Mew 3.0.64
	or later.

2002-08-21  OHASHI Akira  <bg66@koka-in.org>

	* shimbun/sb-macosx-jp.el: New file.
	* shimbun/sb-fml.el (shimbun-get-headers): Use `shimbun-index-url'
	instead of `shimbun-url-internal'.

	* shimbun/sb-redhat.el: Fix.

2002-08-18  OHASHI Akira  <bg66@koka-in.org>

	* shimbun/sb-redhat.el: New file.

2002-08-15  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/shimbun.el (shimbun-retrieve-url): Disable reflesh
	feature.  Move point to top of buffer.

2002-08-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi.el (shimbun-asahi-top-level-domain): New
	variable.
	(shimbun-asahi-url): Use it.
	(shimbun-asahi-from-address): Use it.
	(shimbun-asahi-get-headers-in-the-list-page): Enhance the
	uniqueness of Message-IDs.
	(shimbun-asahi-get-headers-in-the-top-page): Ditto.

2002-08-08  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-w3m-retrieve-1): Do not make error but return nil,
	even if decoding is failed.

2002-08-08  Nishimoto Masaki  <nishimoto@gaju.org>

	* w3m-proc.el (w3m-process-with-environment): Copy
	`process-environment' before `getenv' is called, in order to avoid
	putting side effects to environment variables.

2002-08-07  Takenobu Sugiyama  <sugiyama@ae.advantest.co.jp>

	* shimbun/sb-nikkansports.el (shimbun-nikkansports-groups-alist):
	Follow the change of the Web site.

2002-08-02  Hiroya Murata  <hiroya@use-ebisu.co.jp>

	* shimbun/sb-asahi.el (shimbun-asahi-get-headers-in-the-list-page):
	Follow the change of the Web site.

2002-08-01  TOMITA Yoshinori  <yoshint@flab.fujitsu.co.jp>

	* shimbun/sb-fml.el (shimbun-get-headers): Go to the beginning of
	a buffer before searching for index patterns.

2002-07-31  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-nikkei.el (shimbun-nikkei-get-headers): Follow the
	change of the Web site.

2002-07-31  YAMASAKI  <tyms_ml@plum.freemail.ne.jp>

	* shimbun/sb-slashdot-jp.el
	(shimbun-slashdot-jp-make-story-article): Go to the beginning of
	a buffer before searching for a significant pattern.
	(shimbun-slashdot-jp-make-comment-article): Ditto.
	(shimbun-slashdot-jp-make-story-headers): Ditto.
	(shimbun-slashdot-jp-make-comment-headers): Ditto.

2002-07-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi.el (shimbun-asahi-get-headers-in-the-list-page):
	Follow the change of the Web site.

2002-07-30  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-asahi-html.el (shimbun-asahi-html-content-start):
	Follow the change of the Web site.

2002-07-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/mew-shimbun.el (toplevel): Make the dummy function
	`mew-set-file-modes' allow one argument.

2002-07-29  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-pilot-link.el (shimbun-pilot-link-group-path-alist):
	Add unix-ng entry.

2002-07-25  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (toplevel): Bind `mew-set-file-modes' and
	`mew-file-mode' to avoid byte-compile warnings.
	(mew-shimbun-retrieve-article, mew-shimbun-re-retrieve-article):
	Use `mew-set-file-modes' if exist.

2002-07-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-e21.el (w3m-ucs-to-char): Return char for tilde by default.

2002-07-17  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Release emacs-w3m-1.3.1 from emacs-w3m-1_3 branch.

2002-07-16  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* mime-w3m.el (toplevel): Bind `mime-preview-condition' to avoid
	byte-compile warnings.
	(mime-w3m-insinuate): Install code to overwrite
	`mime-preview-condition' which is already initialized before this
	functions is called.

2002-07-11  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-image-viewer): New option.
	(w3m-content-type-alist): Refer it.

	* shimbun/sb-f1fan.el (shimbun-make-contents): Call
	`shimbun-header-insert-and-buffer-string' to insert <base> tag.

	* shimbun/sb-vinelinux.el (shimbun-make-contents): Insert <html>,
	<head>, <base> and <body> tag.

	* shimbun/sb-ruby.el (shimbun-make-contents): Insert <base> tag.

	* shimbun/sb-pcweb-column.el (shimbun-make-contents): Call
	`shimbun-header-insert-and-buffer-string' to insert <base> tag.

	* shimbun/sb-ibm-dev.el (shimbun-make-contents): Call
	`shimbun-header-insert-and-buffer-string' to insert <base> tag.

	* shimbun/sb-wired.el (shimbun-wired-content-start): Update.
	(shimbun-wired-content-end): Update.

2002-07-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-decoder-alist): Don't examine the existence of w3m
	command when compiling.
	(w3m-dirlist-cgi-program): Ditto.

2002-07-09  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-mailarc.el (shimbun-make-contents): Insert <base> tag.

	* shimbun/sb-mhonarc.el (shimbun-make-contents): Insert <base> tag.

2002-07-09  Hironori FUJII  <fujii@chi.its.hiroshima-cu.ac.jp>

	* w3m.el (w3m-highlight-current-anchor): Don't infloop at the
	beginning of a buffer.

2002-07-09  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-fml.el (shimbun-make-contents): Insert <base> tag.

	* shimbun/sb-kantei.el (shimbun-make-contents): Insert <base> tag.

	* shimbun/sb-mailman.el (shimbun-mailman-make-contents): Use
	`shimbun-header-insert-and-buffer-string'.

	* shimbun/sb-text.el (shimbun-make-contents): Use
	`shimbun-header-insert-and-buffer-string'.

	* shimbun/shimbun.el (shimbun-header-insert-and-buffer-string):
	New function.

	* w3m-perldoc.el (w3m-about-perldoc): Install workaround to
	specify the place in which pod2html generates its cache files.
	Adjust links pointing other perldocs.

2002-07-08  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-namazu.el (shimbun-namazu-group-url-alist): Add
	migemo entry.

2002-07-08  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-mode): Make `list-buffers-directory' to buffer
	local variable.
	(w3m-goto-url): Set title of the URL to `list-buffers-directory'.

	* w3m-tabmenu.el (w3m-switch-buffer): Bind
	`completion-ignore-case' to `t'.

2002-07-08  OKAZAKI Tetsurou  <okazaki@be.to>

	* configure.in: Use `AC_PATH_EMACS' instead of `AC_CHECK_EMACS'.

	* aclocal.m4 (AC_PATH_EMACS): New macro.
	(AC_CHECK_EMACS): Removed.

2002-07-08  SAITO Takuya  <reed@lily.freemail.ne.jp>

	* shimbun/sb-mhonarc.el (shimbun-make-contents): Not insert
	`Reply-To' header.

2002-07-07  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Release emacs-w3m-1.3 from emacs-w3m-1_3 branch.

2002-07-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (byte-optimize-form-code-walker): Advise to make it
	optimize throughout the and/or forms.
	(max-specpdl-size): Increase the value by 5 times for Mule 2.

2002-07-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-accept-japanese-characters): Don't call the external
	command when compiling.
	(examining the value for `w3m-command'): Ditto.

2002-07-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-lynx-like-map): Use the key `(control space)'
	instead of `C- ' for the command `w3m-history-store-position'
	under XEmacs.

2002-06-29  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3mhack.el (w3mhack-nonunix-lispdir): New option.
	(w3mhack-nonunix-icondir): Ditto.
	(w3mhack-nonunix-dryrun): Ditto.
	(w3mhack-nonunix-install): New function.

2002-06-28  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Makefile.in (DOCS): Add `TIPS'.

2002-06-26  Ando Tsutomu  <ando-tom@ff.iij4u.or.jp>

	* w3m-weather.el (w3m-weather-completion-table): Fix typo.

2002-06-27  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-info-like-map): Remove redundant code.

2002-06-27  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-fontify-anchors): Put `w3m-name-anchor' property to
	point-max().
	(w3m-fontify): Remove `w3m-name-anchor' handling.
	(w3m-search-name-anchor): Move in the screen.

2002-06-26  Tadashi Watanabe  <watanabe@sigmaitec.co.jp>

	* w3m.el (w3m-info-like-map): Don't use FSF Emacs style key format
	for XEmacs.

2002-06-26  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (toplevel): Stricten the pattern to detect w3m version.
	(w3m-info-like-map): Changed key bindings of `w3m-shift-left' and
	`w3m-shift-right'.

2002-06-25  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-use-ange-ftp): Chenged its default value to nil.

2002-06-21  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-w3m-retrieve-1): Specify -no-cookie option only when
	the w3m command is configured to accept it.

2002-06-03  Hidetaka Iwai <tyuyu@mb6.seikyou.ne.jp>

	* sb-texfaq.el (shimbun-texfaq-group-path-alist): Fix path
	to get latest articles.

2002-06-20  Yuuichi Teranishi  <teranisi@gohome.org>

	* octet.el (octet-type-filter-alist): Fixed parenthesis.
	(octet-filter-call1, octet-filter-call2, octet-filter-call2-extra):
	Enclose call-process with as-binary-process.

2002-05-31  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* octet.el (octet-find-file): Bind `buffer-read-only', only while
	calling `octet-buffer'.

2002-06-20  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Release emacs-w3m-1.2.8 from emacs-w3m-1_2 branch.

2002-06-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bug.el: Require `w3m-e19' for Emacs 19 to be able to compile
	this module alone.

2002-06-18  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-mailarc.el: New file.

	* shimbun/sb-quickml.el: Ditto.

2002-06-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-search.el (w3m-search): Don't extract a default word from
	the header line.

2002-06-18  NOKUBI Takatsugu  <knok@daionet.gr.jp>

	* shimbun/sb-marc-aims.el: New file.

2002-06-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-header-line-insert): Use the property `keymap'
	instead of `local-map' for the recent Emacsen; add a help echo;
	fix a typo.

	* w3m-xmas.el (w3m-setup-header-line): Remove.

2002-06-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-e19.el: Remove many emulating functions on the condition
	that APEL should be used; require `cl' only when compiling;
	require `pcustom' instead of `custom'.
	(compose-mail): New function.
	(read-passwd): Autoload "ange-ftp".

	* w3m-proc.el (read-passwd): Autoload "w3m-e19" for Emacs 19.

	* w3m-util.el (cancel-timer): Autoload "timer" for not only Mule 2
	but also Emacs 19.

	* w3m.el: Require `w3m-e19' for Emacs 19.

	* w3mhack.el (w3mhack-emacs-major-version): New constant.
	(TopLevel): Silence the byte-compiler for not only Mule 2 but also
	Emacs 19.
	(w3mhack-mdelete): New function.
	(w3mhack-examine-modules): Use it to make the code simple.
	(w3mhack-generate-colon-keywords-file): Be sure to go to the
	beginning of each file before looking for colon keywords (I
	noticed that `insert-file-contents' doesn't always position point
	to the top).

	* README.ja: Update for the use of Emacs 19.

2002-05-30  Kevin Rodgers  <kevin.rodgers@ihs.com>

	NOTE: The following changes have been posted to the emacs-w3m
	mailing list, they were not installed in the CVS repository at the
	time.  The original article has been archived in:

	http://emacs-w3m.namazu.org/ml/msg03472.html

	* w3m-e19.el: New file.

	* w3m.el: Require `w3m-e19' for Emacs 19.
	(w3m-key-binding): Replace the widget `other' with `const'.

	* w3mhack.el (w3mhack-examine-modules): Include w3m-e19.el in the
	listing for Emacs 19.

	* README: Update for the use of Emacs 19.

2002-06-13  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-prepare-content): When cdr of
	`w3m-content-prepare-functions' element is not function,
	call `w3m-prepare-content' recursively.
	(w3m-content-prepare-functions): Add "application/xhtml+xml" entry.

2002-06-13  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-zdnet.el (shimbun-make-contents): Remove image tags
	to `a1100.g.akamai.net'.

2002-06-12  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-uri-replace-alist): New user option.
	(w3m-uri-replace): New function.
	(w3m-goto-url): Call `w3m-uri-replace'.

2002-06-05  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-muchy.el (shimbun-muchy-content-start): New variable.
	(shimbun-muchy-content-end): Ditto.
	(shimbun-make-contents): Just remove advertisements or so and
	call next method.

2002-06-02  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m-e21.el (w3m-ucs-to-char): Don't define it when already defined.

	* w3m-xmas.el (w3m-ucs-to-char): Ditto.

2002-06-03  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Release emacs-w3m-1.2.7 from emacs-w3m-1_2 branch.

	* w3m-weather.el: Require CL when this module is byte-compiled.
	(w3m-weather-completion-table): Fix typos, which are noticed by
	Ando Tsutomu <ando-tom@ff.iij4u.or.jp> in [emacs-w3m:03487].

2002-06-03  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-kde.el (shimbun-kde-reverse-flag): Set this variable
	to t.
	(shimbun-get-headers): Set URL properly.
	Do not use `nreverse' for HEADERS.

2002-05-31  Mito <mito@mxa.nes.nec.co.jp>

	* w3m-weather.el (w3m-weather-completion-table): Fix "niigata-kaetsu".

2002-05-30  Kenichi SATO <ksato@iijmio-mail.jp>

	* sb-sponichi.el (shimbun-sponichi-groups): Add golf and battle.
	(shimbun-get-headers): Follow the change of the Web site.
	Modify regexp to get flash articles.
	(shimbun-get-headers): Change Message-ID format.

2002-05-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (w3m-make-ccl-coding-system): Make it recallable for
	the existing coding-systems (we can now reload w3m.elc under
	XEmacs 21.5-b6 and later).

2002-05-29  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-w3m-retrieve-1): Don't decode the contents when
	redirect.

2002-05-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (define-ccl-program): Remove advice when non-MULE.
	It might be specified by pccl.elc if it has been mis-compiled for
	XEmacs with MULE.

	* w3m.el (w3m-delete-frame-maybe): Don't delete the current frame
	if it is the sole frame in the screen.

2002-05-29  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-zdnet.el (shimbun-make-contents): Small clean up.

2002-05-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-geocrawler.el (customize-save-variable): Shut old
	Emacsen up when compiling.
	* shimbun/sb-makanai.el (md5): Ditto.
	* w3m-xmas.el (unicode-to-char): Shut XEmacs 21.5-b5 and earlier
	up when compiling.

2002-05-29  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/shimbun.el (shimbun-make-html-contents): Insert HTML,
	HEAD, BASE, and BODY tag.

	* shimbun/sb-zdnet.el (shimbun-get-headers): Restore Message-ID
	format.
	(shimbun-zdnet-groups): Abolishded.
	(shimbun-groups): New method.
	(shimbun-get-headers): Small clean up.

2002-05-28  Kenichi SATO <ksato@iijmio-mail.jp>

	* sb-zdnet.el (shimbun-zdnet-group-url-alist): Abolishded.
	(shimbun-zdnet-group-alist): New variable.
	(shimbun-zdnet-groups): Refer `shimbun-zdnet-group-alist'.
	(shimbun-index-url): Ditto.
	(shimbun-zdnet-content-end): Relaxed.
	(shimbun-zdnet-comp-get-headers): Removed.
	(shimbun-zdnet-gamespot-get-headers): Ditto.
	(shimbun-get-headers): Reimplemented.
	(shimbun-make-contents): Remove links and images at
	`ad.zdnet.co.jp'.

2002-05-28  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-geocrawler.el (shimbun-geocrawler-add-group): Clean up.

2002-05-28  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m-e21.el (w3m-ucs-to-char): New function.

	* w3m-xmas.el (w3m-ucs-to-char): New function for XEmacs-21.5.

2002-05-28  MIYOSHI Masanori  <miyoshi@boreas.dti.ne.jp>

	* shimbun/sb-makanai.el (shimbun-makanai-scan-articles): Follow
	the change of the Web site.

2002-05-28  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-geocrawler.el (shimbun-geocrawler-group-alist):
	Changed its default value.
	(shimbun-index-url): Fix typo.
	(shimbun-geocrawler-add-group): New command.

2002-05-27  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/shimbun.el (shimbun-header-insert): Insert `Reply-To'
	header.

	* shimbun/sb-geocrawler.el: New file.

2002-05-26  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-kde.el: New file.

2002-05-23  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-zdnet.el (shimbun-zdnet-group-url-alist): Changed URL of
	"comp".
	(shimbun-zdnet-expiration-days): New variable.
	(shimbun-zdnet-comp-get-headers): Follow the change of page.

2002-05-20  NOMIYA Masaru  <nomiya@ttmy.ne.jp>

	* shimbun/sb-nikkei.el (shimbun-nikkei-groups): Add `main'.

2002-05-20  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-palmfan.el (shimbun-palmfan-palmwarefan-headers):
	Modify regexp to pick up price from BODY for working around.

2002-05-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-mailman.el (shimbun-mailman-make-contents): New
	function separated from `shimbun-make-contents'.
	(shimbun-make-contents): Use it.
	(shimbun-mailman-headers): New function separated from
	`shimbun-headers'; rewrite it to search new articles in the
	reverse order.

	* shimbun/sb-nikkei.el (shimbun-nikkei-get-headers): Don't include
	year, month and day numbers in Message-ID.

2002-05-20  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-ruby.el (shimbun-get-headers): Do not use nreverse
	for HEADERS.

2002-05-19  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-palmfan.el (shimbun-palmfan-group-path-alist): Add
	palmwarefan entry.
	(shimbun-palmfan-palmwarefan-date-regexp): New constant.
	(shimbun-reply-to): Change email address to brian@palmfan.com
	if GROUP is "palmwarefan".
	(shimbun-palmfan-palmwarefan-headers): New function.
	(shimbun-headers): Call `shimbun-palmfan-palmwarefan-headers' if
	GROUP is "palmwarefan".
	(shimbun-palmfan-news-headers): Do not use nreverse for HEADERS.

2002-05-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (tarball): Chmod 755 configure.

2002-05-16  Hidetaka Iwai <tyuyu@mb6.seikyou.ne.jp>

	* shimbun/sb-japantimes.el, shimbun/sb-texfaq.el: New files.

2002-05-16  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-auto-show): Check multiple command like a
	`previous|next-line' or `beginning|end-of-buffer' at the buffer's
	edge.
	(w3m-window-hscroll): New function to rescue for XEmacs with Mule.
	(w3m-current-column, w3m-set-window-hscroll): Chenge method of the
	calculation point.
	the difference points.
	(w3m-horizontal-scroll, w3m-horizontal-on-screen)
	(w3m-horizontal-recenter): Use `w3m-window-hscroll'.
	(w3m-redisplay-this-page): Don't handle store|restore position.
	(w3m-goto-url): If reload or redisplay, restore position of
	history.

2002-05-15  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-after-cursor-move-hook): Add `w3m-auto-show'.
	(w3m-auto-show, w3m-horizontal-scroll-division): New options.
	(w3m-next-anchor, w3m-previous-anchor, w3m-next-form)
	(w3m-previous-form, w3m-next-image, w3m-previous-image): Call
	`w3m-horizontal-on-screen'.
	(w3m-mode): Bind many variables for automatic scrolling when
	`w3m-auto-show' is non-nil.
	(w3m-scroll-left, w3m-scroll-right, w3m-shift-left)
	(w3m-shift-right): Call `w3m-horizontal-scroll'.
	(w3m-horizontal-scroll-done): New buffer local variable.
	(w3m-current-position): Modify initial value.
	(w3m-auto-show, w3m-horizontal-scroll, w3m-horizontal-on-screen):
	New functions.
	(w3m-horizontal-recenter, w3m-beginning-of-line)
	(w3m-end-of-line): Use `w3m-set-window-hscroll' and
	`w3m-current-column'.
	(w3m-store-current-position): Set markers of beginning of line and
	end of line.
	(w3m-check-current-position): Check car of `w3m-current-position'.
	(w3m-current-column, w3m-set-window-hscroll): New functions to
	rescue for XEmacs with Mule.

2002-05-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-form.el (w3m-form-replace): Don't pad the form slot with
	spaces if a string is longer than that width.

2002-05-14  SAITO Takuya <reed@lily.freemail.ne.jp>

	* shimbun/sb-vinelinux.el (shimbun-vinelinux-group-path-alist): Add
	entry for Vine Linux 2.5 errata.
	(shimbun-vinelinux-group-path-alist1): Remove.
	(shimbun-get-headers): Don't retrieve index twice.

2002-05-14  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-arrived-p): Move its definition in order to avoid
	byte-compile warning.

	* Makefile.in (default, what-where): Change order.

2002-05-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el: Modify the error message that XEmacs APEL package
	versions 1.23 and later can barely be used to run emacs-w3m.

2002-05-14  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-2ch.el (shimbun-2ch-parse-page): Add `ID:' to the From
	field, as a comment.

2002-05-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-mode): Suppress compile warning under old Emacsen.

	* Makefile.in (what-where): New rule.

	* w3mhack.el (w3mhack-what-where): New function.
	(locate-library): Make the function silent for Mule first.

2002-05-13  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-horizontal-shift-columns): New user option.
	(w3m-shift-left, w3m-shift-right): New commands.
	(w3m-lynx-like-map, w3m-info-like-map): Add keybind
	`w3m-shift-left' and `w3m-shift-right'.
	(w3m-mode): Modify doc-string for new commands. Bind
	`auto-show-mode' to nil.

2002-05-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-nikkei.el (shimbun-nikkei-get-headers): New function;
	parse a date string though it is defective; change the id format.
	(shimbun-get-headers): Use it.

2002-05-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-hist.el (w3m-history-add-arrived-db): Force update the page.

	* shimbun/sb-nikkei.el (shimbun-nikkei-x-face-alist): New face.
	(shimbun-get-headers): Rewrite to adapt it for the new forms on
	the server.

2002-05-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-mailman.el: Require `cl' when compiling.
	(shimbun-headers): Use an empty string instead of `0' for a date
	header; reverse the order of the return value.

	* w3m-bug.el (report-emacs-w3m-bug-system-informations): Don't
	include useless infos; eval the value for each time to load it.
	(report-emacs-w3m-bug): Bind `print-length' and `print-level' with
	nil.

2002-05-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-menubar): Modify the label for report-emacs-w3m-bug.
	(w3m-lynx-like-map): Replace the key `C-c C-b' with `C-c C-v' for
	`w3m-history-restore-position'; replace the key `C-c b' with
	`C-c C-b' for `report-emacs-w3m-bug'.
	(w3m-info-like-map): Ditto.
	(w3m-mode): Add a document for `report-emacs-w3m-bug'.

	* w3mhack.el: Check for the validity on APEL also for XEmacs with
	MULE.

	* w3m-bug.el (report-emacs-w3m-bug-system-informations): Add
	(featurep 'mule) and (featurep 'file-coding).

2002-05-07  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-download): Modify string of the prompt.
	(w3m-prepare-content): Add 5th optional argument `retry'. If not
	determine content-type, ask its.

2002-05-07  Yoichi NAKAYAMA  <yoichi@FreeBSD.org>

	* shimbun/sb-savannah.el: New file.

2002-04-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bug.el (report-emacs-w3m-bug): Bind `after-load-alist' to
	nil while loading the file itself; examine system info in the
	`w3m-mode' buffer.

2002-04-27  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-bug.el (report-emacs-w3m-bug-system-informations): Add
	`mule-version' and `Meadow-version'.
	(report-emacs-w3m-bug): Fix when info is a function.

	* w3m.el (w3m-menubar): Add many functions.

2002-04-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bug.el: New file.

	* w3m.el: Autoload "w3m-bug" for `report-emacs-w3m-bug'.
	(w3m-lynx-like-map): Bind `report-emacs-w3m-bug' to C-cb.
	(w3m-info-like-map): Ditto.

	* w3m-om.el (compose-mail): New function.

	* w3mhack.el: Check for the validity on APEL.

2002-04-26  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-arrived-modify): New function.
	(w3m-local-attributes): If set Content-type in arrived DB, return
	it.
	(w3m-redisplay-this-page, w3m-redisplay-and-reset)
	(w3m-redisplay-with-content-type): New commands.
	(w3m-redisplay-with-charset): Use `w3m-arrived-modify'.
	(w3m-lynx-like-map): Bind all new commands and modify bind for
	`w3m-redisplay-with-charset'.
	(w3m-info-like-map): Ditto.
	(w3m-mode): Document them.
	(w3m-goto-url): If reload is 'redisplay, do redisplay only. Modify
	content-type decided method at local URL.
	(w3m-about-header): Display `Modifer Information'.
	(w3m-header-line-insert): Display modifers when type are setting.

2002-04-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-horizontal-recenter): New command.
	(w3m-beginning-of-line): New command.
	(w3m-end-of-line): New command.
	(w3m-lynx-like-map): Bind them.
	(w3m-info-like-map): Bind them.
	(w3m-mode): Document them.

2002-04-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (w3m-bitmap-image-face-inherit): Default to t.

	* w3m-om.el (w3m-om-use-overstrike-to-make-face-bold): New var.
	(custom-declare-face): Advise it to use `set-face-bold-p' to make
	faces bold by overstriking.

	* w3m-util.el (w3m-default-face-colors): New constant.
	* w3m.el (w3m-bold-face, w3m-underline-face): Use it.

2002-04-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (w3m-bitmap-image-insert): Don't put the
	transparent face except for Emacs 20.

	* w3m.el (w3m-key-binding): Don't manipulate key bindings if
	w3m.elc has not been loaded (it will fix the problem that the face
	colors might not be specified under Mule 2).

2002-04-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (w3m-bitmap-transparent-face): Remove.
	(w3m-bitmap-image-insert): Use the list form instead of
	`w3m-bitmap-transparent-face' to make the overlay transparent.

2002-04-23  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-bitmap.el (w3m-bitmap-convert-arguments)
	(w3m-bitmap-image-face-inherit): New customize values.
	(w3m-create-image): Append argument `w3m-bitmap-convert-arguments'
	when call `w3m-imagick-start-convert-buffer'.
	(w3m-insert-image): If `w3m-bitmap-image-face-inherit' is non-nil,
	inherit the face of bitmap image from the face of text at point.

2002-04-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (distclean): Remove autom4te*.cache rather than
	autom4te.cache.

	* w3m-bitmap.el (w3m-bitmap-transparent-face): New face.
	(w3m-bitmap-image-insert): Put `w3m-bitmap-transparent-face' to
	overlays; don't use overlays to highlight bitmap images.
	(w3m-insert-image): Add `w3m-bitmap-image-face' to a bitmap image
	as a text property.

2002-04-23  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-toggle-inline-images-internal): Call
	`w3m-insert-image' with the url of image.

	* w3m-xmas.el (w3m-insert-image): Add dummy argument.

	* w3m-e21.el (w3m-insert-image): Add dummy argument.

	* w3m-bitmap.el (w3m-bitmap-cache-image-hook): New hook.
	(w3m-create-image): Run `w3m-bitmap-cache-image-hook' with `url'
	when use the cached image.
	(w3m-insert-image): Add 4th argument `url'. Do nothing which have
	no 'w3m-image property or differ its url.

2002-04-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	Make emacs-w3m can be compiled by `make slow' with no warnings.
	* Makefile.in (slow): Don't echo the values for EMACS and FLAGS.
	* octet.el: Require `w3m-util' for `w3m-insert-string'.
	* w3m-bitmap.el: Autoload w3m-om for `move-to-column-force'.
	* w3m-hist.el: Load w3m-kwds.el for old Emacsen.
	* w3m-image.el: Require `pcustom' for old Emacsen; bind some
	external vars when compiling.
	* w3m.el: Enclose the definitions for `w3m-current-title' and
	`w3m-current-url' with `eval-and-compile', and move them forward.
	(w3m-url-at-point): Enclose with `eval-and-compile'.
	(w3m-add-local-hook): Ditto.
	(w3m-about-retrieve): Call `base64-decode-string' indirectly to
	avoid compile warn under old Emacsen.

	* w3m-util.el (w3m-insert-string): Fix doc-string.

2002-04-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-2ch.el (shimbun-article): Don't encode with base64;
	use `w3m-insert-string' to insert raw encoded article.

2002-04-22  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-palmfan.el (shimbun-palmfan-news-headers): Build
	message-id without `http://'.

2002-04-22  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-region): Call `w3m-process-stop' first.

	* shimbun/mew-shimbun.el (mew-shimbun-scan-replace):
	`mew-pop-scan-header' require multi-byte buffer.

	* mew-w3m.el (mew-w3m-view-inline-image): Toggle
	`mew-w3m-auto-insert-image'.
	(mew-w3m-cid-retrieve-hook): New customize hook.
	(mew-w3m-cid-retrieve): Run `mew-w3m-cid-retrieve-hook'.

2002-04-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-util.el (w3m-insert-string): Prevent doubling expansion on
	the arg.

	* shimbun/sb-palmfan.el (shimbun-palmfan-news-headers): Bind
	unbound var `body'.

2002-04-20  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* mime-w3m.el (mime-w3m-cid-retrieve): Use `w3m-insert-string'
	instead of `insert' to prevent multibyte/unibyte problems.
	* octet.el (mime-preview-octet, mime-view-octet): Ditto.
	* shimbun/sb-hns.el (shimbun-article): Ditto.

	* w3m-util.el (w3m-insert-string): Moved from shimbun/shimbun.el.

	* shimbun/shimbun.el (shimbun-make-mime-article): Keep the
	uniqueness on cid's.
	(shimbun-insert-string): Moved to w3m-util.el and renamed to
	`w3m-insert-string'.
	(shimbun-article): Replace `shimbun-insert-string' with
	`w3m-insert-string'.

2002-04-21  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-mailman.el: New file.
	* shimbun/sb-pilot-link.el: Ditto.

2002-04-20  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-w3m-attributes): Set type to downcase.

2002-04-20  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-palmfan.el (shimbun-palmfan-news-headers): Add
	SUBJECT to BODY if SUBJECT contains a link.

2002-04-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-about-header): Don't use `make-string' to make a
	separator text under Mule.

2002-04-19  Hideyuki SHIRAI  <shirai@meadowy.org>

	* mew-w3m.el (mew-w3m-cid-retrieve): Support w3m-bitmap.el when
	retrieve `cid image' (Mew cache has multibyte strings, but work
	buffer is unibyte).

2002-04-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (TopLevel): Not to get the byte-code for
	`current-column' inlined under old Emacsen.

	* w3m-bitmap.el (w3m-bitmap-emacs-broken-p): Use
	`ad-Orig-current-column' rather than `current-column' if it has
	already been defined.
	(TopLevel): Not to get the byte-code for `current-column' inlined
	under the broken Emacsen in case when compiling manually.

2002-04-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (TopLevel) Require `cl' and possibly load cl-macs.
	The following changes are for old Emacsen.
	(w3m-bitmap-emacs-broken-p): New constant.
	(TopLevel): Warn if Emacs has a bug on managing column numbers.
	(w3m-bitmap-move-to-column): Allow the 3rd arg `strictly'; don't
	modify the buffer contents unless the 3rd arg has been set.
	(w3m-bitmap-defadvice-if-broken): New macro; use it to advise the
	functions `current-column', `move-to-column',
	`move-to-column-force', `next-line' and `previous-line' to work
	under the broken Emacsen.
	(w3m-bitmap-byte-indexed-characters-p): Remove.
	(TopLevel): Don't alias `w3m-bitmap-current-column' to
	`current-column'; don't alias `w3m-bitmap-move-to-column-force' to
	`move-to-column-force'.
	(w3m-bitmap-substitute-key-definitions): Remove.
	(w3m-bitmap-image-insert): Replace `w3m-bitmap-current-column'
	with `current-column'; replace `w3m-bitmap-move-to-column-force'
	with `move-to-column-force'.
	(w3m-bitmap-image-delete-internal): Ditto.

	* w3m-om.el (move-to-column-force): New function using
	`move-to-column-strictly'.

	* shimbun/shimbun.el (shimbun-insert-string): Avoid compile warn.

2002-04-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-2ch.el (shimbun-2ch-parse-page): Don't stop retrieving
	headers if the article number is `1'.

	* shimbun/shimbun.el (shimbun-make-mime-article): Removed garbage.
	(shimbun-insert-string): New macro.
	(shimbun-article): Use it.

2002-04-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (w3m-bitmap-next-line): Handle
	`temporary-goal-column'.

2002-04-18  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-halfdump-command-arguments): Fix last change.

2002-04-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (w3m-bitmap-byte-indexed-characters-p): New macro.
	The following changes are for old Emacsen.
	(w3m-bitmap-move-to-column): New function.
	(w3m-bitmap-move-to-column-force): Use it.
	(w3m-bitmap-next-line): New command.
	(w3m-bitmap-previous-line): New command.
	(w3m-bitmap-substitute-key-definitions): New function; add it to
	`w3m-mode-hook' as the one-shot function.

2002-04-17  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-halfdump-command-arguments): Add `-I e' option to
	w3m under Japanese environment.

2002-04-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mime-w3m.el (mime-w3m-cid-retrieve): Use `mime-decode-string',
	`mime-entity-body' and `mime-entity-encoding' instead of
	`mime-insert-entity-content' to make it work even if the entity
	buffer is multibyte.

2002-04-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-2ch.el (shimbun-2ch-request-article): Rename from
	`shimbun-request-article'.

2002-04-17  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-palmfan.el: New file.
	(shimbun-palmfan-news-headers): Bug fixed (catch stop tag).

2002-04-16  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-2ch.el (shimbun-article): Encode body content with base64.

2002-04-16  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (mew-shimbun-retrieve-article)
	(mew-shimbun-re-retrieve-article): Set unibyte at work buffer.

2002-04-16  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-2ch.el (shimbun-2ch-parse-page): Fixed regexp.
	(shimbun-headers): Fixed error URL.

	* w3m.el (w3m-check-header-tags): Renamed from w3m-check-link-tags.
	(w3m-check-header-tags): Parse base tag too.
	(w3m-rendering-buffer-1): Use it.
	(w3m-prepare-text-content): Don't use w3m-base-url.

2002-04-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-2ch.el (shimbun-request-article): Remove unbound vars.
	(shimbun-headers): Bind `ita' and `sure'.

2002-04-15  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-2ch.el: New file.

	* shimbun/shimbun.el (shimbun-retrieve-url): Set no-decode argument
	of w3m-retrieve as nil.

2002-04-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (w3m-bitmap-image-insert): Replace `insert' with
	`insert-before-markers'.
	(w3m-bitmap-image-delete-internal): Delete trailing newlines.
	(w3m-insert-image): Don't check for the existence of an image.

	* w3m.el (w3m-history-current-url-face): Provide `font' temporally
	to avoid loading it and `cl'.

2002-04-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (w3m-bitmap-image-get-overlay): Don't clear the
	`evaorate' property here.
	(w3m-bitmap-image-insert-internal): Rename to
	`w3m-bitmap-image-insert'; change the meaning of the 2nd arg
	`image' (see docs); allow the optional arg `ovr'; don't scan for
	an overlay here; handle `w3m-bitmap-image-count'; use overlays
	to highlight bitmap images.
	(w3m-bitmap-image-insert): Remove old one.
	(w3m-bitmap-image-delete-internal): Allow the 2nd arg `ovr'; don't
	scan for an overlay here; clear the `evaorate' property here.
	(w3m-bitmap-image-delete): Allow the 2nd arg `ovr'; don't scan
	for an overlay here; don't delete an overlay.
	(w3m-bitmap-image-delete-string): Remove.
	(w3m-insert-image): Scan for an overlay here; don't use text props
	to highlight bitmap images.
	(w3m-remove-image): Scan for an overlay here.

2002-04-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (w3m-bitmap-image-cleanup): Remove.
	(w3m-bitmap-image-get-overlay): Clear the `evaorate' property in
	an overlay temporally.
	(w3m-bitmap-image-insert-internal): Put the `evaorate' property in
	an overlay; return an overlay.
	(w3m-bitmap-image-insert): Use the return value of
	`w3m-bitmap-image-insert-internal' instead of to call
	`w3m-bitmap-image-get-overlay'.
	(w3m-bitmap-image-insert-string): Remove.
	(w3m-insert-image): Use `w3m-modify-plist' to cleanup plist; don't
	move the point.
	(w3m-remove-image): Replace `w3m-bitmap-image-insert-string' with
	`w3m-bitmap-image-insert-internal'.

	* w3m-util.el (w3m-modify-plist): New function.

2002-04-12  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-proc.el (w3m-process-kill-surely): New internal variable.
	(w3m-process-kill-process): When `w3m-process-kill-surely' is
	non-nil, wait for the completion to kill process surely.

2002-04-07  NOMIYA Masaru  <nomiya@ttmy.ne.jp>

	* shimbun/sb-asahi-html.el (shimbun-asahi-html-url): Changed
	default value.

	* shimbun/sb-asahi.el (shimbun-asahi-url): Ditto.

2002-04-12  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-xemacs.el (shimbun-xemacs-groups): Add xemacs-design.

2002-04-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (w3m-bitmap-image-get-overlay): Speed up a bit.
	(w3m-bitmap-image-insert-internal): Replace `current-column' with
	`w3m-bitmap-current-column'; call `w3m-add-text-properties' only
	when props are specified; use `overlay-end' dynamically (fix a bug
	I've made); replace `move-to-column-force' with
	`w3m-bitmap-move-to-column-force'.
	(w3m-bitmap-image-delete-internal): Make the 2nd arg optional;
	replace `current-column' with `w3m-bitmap-current-column'; replace
	`move-to-column-force' with `w3m-bitmap-move-to-column-force';
	guess the end position of an overlay by itself when the 2nd arg is
	omitted.
	(w3m-bitmap-image-delete): Remove the 2nd arg.
	(w3m-bitmap-image-delete-string): Alias to
	`w3m-bitmap-image-delete-internal' instead of defining as a
	function.
	(w3m-insert-image): Don't use the length of a bitmap image.
	(w3m-remove-image): Ditto.

	* w3m-om.el (move-to-column-force): Remove.

2002-04-10  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-image.el (w3m-imagick-convert-async-exec): Change default
	value for Meadow.

2002-04-10  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-e21.el (w3m-favicon-converted): New buffer-local variable.
	(w3m-setup-favicon): Set w3m-favicon-converted as nil.
	(w3m-buffer-favicon): If w3m-favicon-converted is non-nil, don't
	start conversion.
	Set w3m-favicon-converted as t before conversion.

2002-04-10  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-about-retrieve): Change behavior according to
	whether the return value of `base64-decode-string' is multibyte or
	not.

	* w3m-image.el (w3m-imagick-convert-async-exec): New user option.
	(w3m-imagick-start): Use `call-process' when
	`w3m-imagick-convert-async-exec' is nil.
	(w3m-imagick-convert-buffer): Don't use stdin because `convert'
	can not handle an animation GIF that it input from stdin.

2002-04-10  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-bitmap.el (w3m-create-image): Use w3m-process-do-with-temp-buffer
	instead of w3m-process-do.
	(w3m-create-image): Don't call `set-buffer-multibyte' if old mule.

	* w3m-image.el (w3m-imagick-start-convert-buffer): Removed needless
	`concat'.

	* w3m-bitmap.el (w3m-create-image):
	Call `w3m-imagick-start-convert-buffer' instead of
	`w3m-imagick-convert-data'.

2002-04-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (w3m-bitmap-current-column): New function for old
	Emacsen; alias to `current-column' for the recent Emacsen.
	(w3m-bitmap-move-to-column-force): New function for old Emacsen;
	alias to `move-to-column-force' for the recent Emacsen.

2002-04-10  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-image.el (w3m-imagick-convert-data): Check buffer size.
	(w3m-imagick-start-convert-data): Ditto.
	(w3m-imagick-start-convert-buffer): Don't use output file
	(Because it sometimes causes multiple files).

2002-04-10  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3mhack.el (w3mhack-examine-modules): Reverse the turn of the
	load with `bitmap' and `un-define'.

2002-04-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (w3m-bitmap-image-face): New face.
	(w3m-bitmap-image-insert-internal): Put text properties.
	(w3m-bitmap-image-insert): Pass text properties argument to
	`w3m-bitmap-image-insert-internal'.
	(w3m-bitmap-image-add-text-properties): Remove.
	(w3m-insert-image): Pass text properties to
	`w3m-bitmap-image-insert'.

2002-04-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (w3m-bitmap-image-get-overlay): Use
	`line-beginning-position' and/or `line-end-position'.
	(w3m-bitmap-image-insert-internal): Ditto.
	(w3m-bitmap-image-delete-internal): Ditto.
	(w3m-bitmap-image-add-text-properties): Ditto.

	* w3m-om.el: Require `w3m-bitmap' if BITMAP-MULE is available.
	(move-to-column-force): Define it if void.

2002-04-09  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-bitmap.el: Convert CRLF to LF.
	(w3m-display-graphic-p): Ruturn nil if no window-system.
	(w3m-image-type-available-p): Ruturn nil if not found "convert".

	* w3mhack.el (w3mhack-examine-modules): Don't byte-compile
	w3m-bitmap.el under XEmacs or FSF Emacs-21.

	* w3m.el (w3m-fontify): When delete duplicated empty line, keep
	'w3m-name-anchor property surely.

	* w3m-e20.el (top): Require 'w3m-bitmap if have BITMAP.

2002-04-09  Taiki SUGAWARA  <taiki.s@cityfujisawa.ne.jp>

	* w3mhack.el (w3mhack-examine-modules): Don't byte-compile
	w3m-bitmap.el if bitmap.el is not installed.
	(w3mhack-examine-modules): Add condition to w3m-bitmap.el check.

	* w3m-bitmap.el: New file.

	* w3m-e20.el (w3m-create-image, w3m-insert-image,
	w3m-remove-image, w3m-image-type-available-p,
	w3m-display-graphic-p, w3m-display-inline-images-p): Alias to
	`ignore'. Bitmap image implementation is moved to w3m-bitmap.el.
	(w3m-bitmap-image-cache-alist, w3m-bitmap-image-use-cache,
	w3m-bitmap-image-cleanup, w3m-bitmap-image-buffer,
	w3m-bitmap-image-get-overlay, w3m-bitmap-image-insert-internal,
	w3m-bitmap-image-insert, w3m-bitmap-image-insert-string,
	w3m-bitmap-image-delete-internal, w3m-bitmap-image-delete,
	w3m-bitmap-image-delete-string,
	w3m-bitmap-image-add-text-properties): Move to w3m-bitmap.el.

2002-04-09  Taiki SUGAWARA  <taiki.s@cityfujisawa.ne.jp>

	* w3m-e20.el (w3m-create-image): Return nil if
	w3m-imagick-convert-buffer is failed.
	(w3m-insert-image): Not insert image if image is nil.

2002-04-08  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-coding-system): Change default value to
	'iso-2022-7bit-ss2 when use w3mmee under mule environment.

2002-04-08  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-xmas.el (w3m-create-image): Resize gif images, too.

2002-04-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (w3m-make-glyph): Remove unused var.

2002-04-08  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-char-to-int): New alias.
	(w3m-form-mee-attr-unquote): Use it.
	(w3m-form-mee-new): Ditto.

	* w3m-xmas.el (toplevel): Require 'w3m-image.
	(w3m-make-glyph): New inline function.
	(w3m-create-image): Resize images when w3m-resize-images is non-nil.

	* w3m-form.el (w3m-string-to-char-list)[XEmacs]: Use string-to-list
	instead of string-to-char-list.
	(w3m-int-to-char): New alias.
	(w3m-form-mee-select-value): Use it.

2002-04-08  Taiki SUGAWARA  <taiki.s@cityfujisawa.ne.jp>

	* w3m-e20.el (w3m-bitmap-image-insert-internal): Begin the overlay
	on `begion-of-line'.

2002-04-08  Yuuichi Teranishi  <teranisi@gohome.org>

	* octet.el: Update URL for xlhtml.

2002-04-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-util.el: Don't require `pcustom'.

2002-04-08  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-image.el: New file.

	* w3m.el (w3m-halfdump-command-arguments): Specify single-row-image
	dump option instead of image.
	(w3m-goto-mailto-url): Added optional post-data argument and use it.
	(w3m-goto-url): Set post-data of w3m-goto-mailto-url.

	* w3m-util.el (w3m-imagick-convert-program,
	w3m-imagick-convert-buffer, w3m-imagick-convert-data): Moved to
	w3m-image.el.

	* w3m-e21.el (toplevel): Require 'w3m-image.
	(w3m-resize-images, w3m-imagick-start-convert-data,
	w3m-imagick-start-convert-buffer, w3m-imagick-start,
	w3m-resize-image): Moved to w3m-image.el;
	(w3m-create-image): Follow the change in w3m-resize-image.
	(w3m-favicon-usable-p): Renamed from w3m-imagick-convert-usable-p.
	(w3m-use-favicon): Follow the change above.
	(w3m-favicon-cache-data): Fixed typo.
	(w3m-favicon-cache-retrieved): Ditto.
	(w3m-retrieve-favicon): Ditto.

	* w3m-e20.el (w3m-image): Require 'w3m-image.

2002-04-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (multibyte-string-p): Alias to `stringp' if MULE,
	otherwise `ignore'.

	* w3m-om.el (multibyte-string-p): Alias to `stringp'.

	* w3m-util.el: Require `pcustom' for old Emacsen.

2002-04-05  Takenobu Sugiyama  <sugiyama@ae.advantest.co.jp>

	* shimbun/sb-nikkansports.el: Follow the change of the Web site.

2002-04-05  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-w3m-retrieve): Revert previous change.
	(w3m-w3m-dump-head-source): Add argument orig-url;
	Cache header and body using orig-url.
	(w3m-w3m-retrieve): Don't cache header here;
	Return error response when follow redirection number exceeds
	w3m-follow-redirection;
	Pass orig-url to w3m-w3m-retrieve-1.
	(w3m-w3m-retrieve-1): Add argument orig-url;
	Call w3m-dump-head-source with orig-url argument.
	(w3m-redirect-with-get): Changed default value to t.

2002-04-05  Taiki SUGAWARA  <taiki.s@cityfujisawa.ne.jp>

	* w3m-e20.el (w3m-bitmap-image-insert): Fix (point) -> pos.

2002-04-04  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-form-input-map): If menu string is empty,
	use href string instead.

	* w3m.el (w3m-w3m-dump-head-source): Fixed caching logic.
	(w3m-w3m-retrieve): Use cache if available after redirection.

2002-04-04  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-e20.el (top): Avoid byte-compile warnings when not found
	`bitmap'.
	(w3m-image-type-available-p): Return nil if not have `bitmap'.

2002-04-04  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-fontify-anchors): Set default icon type as ico.

	* w3m-e21.el (w3m-buffer-favicon): Asynchronous implementation.

2002-04-04  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3mhack.el (top): Avoid byte-compile error for `w3m-ucs.el' with
	Emacs20 when it has `un-define' and `bitmap'.
	(w3mhack-load-path): Add the path of `bitmap.el' on Emacs20.

2002-04-04  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-request-arguments): Use -header option if no cookie
	nor no body.
	(w3m-w3m-retrieve-1): Delete temp-file only when it exists.

	* w3m-e21.el (w3m-imagick-start-convert-data): Don't use
	string-as-unibyte (no use).

2002-04-04  Taiki SUGAWARA  <taiki.s@cityfujisawa.ne.jp>

	* w3m.el (w3m-toggle-inline-images-internal): Support
	w3m-bitmap-image.

	* w3m-e21.el (w3m-imagick-convert-program): Move to w3m-util.el.
	(w3m-imagick-convert-buffer): Ditto.
	(w3m-imagick-convert-data): Ditto.

	* w3m-util.el (w3m-imagick-convert-program): Move from w3m-e21.el.
	(w3m-imagick-convert-buffer): Ditto.
	(w3m-imagick-convert-data): Ditto.

	* w3m-e20.el (w3m-bitmap-image-cache-alist): New variable.
	(w3m-bitmap-image-use-cache): Ditto.
	(w3m-bitmap-image-cleanup): New function.
	(w3m-bitmap-image-buffer): Ditto.
	(w3m-bitmap-image-get-overlay): Ditto.
	(w3m-bitmap-image-insert-internal): Ditto.
	(w3m-bitmap-image-insert): Ditto.
	(w3m-bitmap-image-insert-string): Ditto.
	(w3m-bitmap-image-delete-internal): Ditto.
	(w3m-bitmap-image-delete): Ditto.
	(w3m-bitmap-image-delete-string): Ditto.
	(w3m-bitmap-image-add-text-properties): Ditto.
	(w3m-display-graphic-p): New implementation.
	(w3m-display-inline-images-p): Ditto.
	(w3m-image-type-available-p): Ditto.
	(w3m-create-image): New implementation. It use w3m-bitmap-image-*.
	(w3m-insert-image): Ditto.
	(w3m-remove-image): Ditto.

2002-04-03  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-fontify): Put invisible and intangible properties at
	the duplicated empty lines instead of delete them.

2002-04-03  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-e21.el (w3m-resize-image): Asynchronous implementation.
	(w3m-imagick-start-convert-data): New function.
	(w3m-imagick-start-convert-buffer): Ditto.
	(w3m-imagick-start): Ditto.
	(w3m-create-image): Rewrite to resize images asynchronously.
	(w3m-insert-image): Don't resize.

2002-04-03  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-check-link-tags): Relax the pattern to detect
	headers.

2002-04-02  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-form-submit): Confirm when posting from secure page
	to normal page.

	* w3m.el (w3m-redirect-with-get): New user option.
	(w3m-w3m-retrieve): If w3m-redirect-with-get is non-nil, use GET
	method after redirection; Ask user to use POST data after redirection.
	(w3m-w3m-attributes): Set w3m-current-redirect as a cons cell of
	(CODE . LOCATION).
	(w3m-w3m-dump-head-source): Don't cache content if the response code is
	one of 302, 303, 307.
	(w3m-w3m-retrieve): Change POST redirection behavior according to
	response code.
	(w3m-retrieve-and-render): Confirm leaving secure pages.

	* octet.el (mime-preview-octet): Change behavior according to
	whether the return value of mime-entity-content is multibyte or not.
	(mime-view-octet): Ditto.

	* w3m.el (w3m-w3m-retrieve): Don't call w3m-cache-request-header
	when type is nil.

2002-04-01  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-follow-redirection): New user option.
	(w3m-w3m-attributes): Set w3m-current-redirect as nil.
	(w3m-cookie-command-arguments): Abolish.
	(w3m-request-arguments): Use cookie only when w3m-use-cookies is
	non-nil.
	(w3m-header-arguments): New function.
	(w3m-w3m-retrieve): Treat redirection when w3m-follow-redirection
	is non-nil.
	(w3m-w3m-retrieve-1): Renamed from w3m-w3m-retrieve.
	(w3m-prepare-content): Don't care w3m-current-redirect.
	(w3m-goto-url): Ditto.

	* w3m-form.el (w3m-form-new): Added argumnet enctype.
	(w3m-form-enctype): New macro.
	(w3m-form-plist): Changed definition.
	(w3m-form-put-property): Ditto.
	(w3m-form-make-form-data): Removed optional argument urlencode;
	Encode form data acording to w3m-form-enctype.
	(w3m-form-mee-new): Set enctype field.
	(w3m-form-parse-and-fontify): Parse enctype.
	(w3m-form-submit): Don't pass enctype argumnet.

2002-04-01  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-fontify-anchors): Put a property of
	`w3m-name-anchor' as a list.
	(w3m-move-point-for-localcgi): Use `w3m-search-name-anchor'.
	(w3m-search-name-anchor): Use `member' when compare a name with
	`w3m-name-anchor'. Fix continuous name-anchor.

2002-03-30  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-m17n.el (shimbun-m17n-group-path-alist): Add
	an entry of mule@m17n.org.

2002-03-29  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (mew-shimbun-element-body)
	(mew-shimbun-get-id-msgs, mew-shimbun-unseen-check)
	(mew-shimbun-unseen-setup): Use `match-string' instead of
	`mew-match'.
	(top): Define `mew-local-folder-alist' to avoid byte-compile
	warings.
	(mew-shimbun-goto-folder, mew-shimbun-retrieve-article): Support
	Mew 3.0.55 or later.

	* mew-w3m.el (mew-mime-text/html-w3m): Use `match-string' instead
	of `mew-match'.

	* w3m.el (w3m-fontify-anchors): Modify the point for
	'w3m-name-anchor property when its has an empty body.

2002-03-28  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-dump-head-source-command-arguments)[w3mmee]: Don't
	add Accept-Language header option.
	(w3m-cookie-command-arguments)[w3mmee]: Don't add Cookie header option.
	(w3m-request-arguments): New function to generate -request option.
	(w3m-w3m-retrieve)[w3mmee]: Use w3m-request-arguments to make request
	header and body.

2002-03-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-url-at-point (ffap)): Strip text props under XEmacs.
	(ffap-url-regexp): Modify the value to make it match to https urls
	for Emacs 19, 20 and XEmacs.

2002-03-27  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-e21.el (w3m-tab-drag-mouse-function): Fix problem when dragged
	mouse position is outside of the original frame.

	* w3m.el (w3m-version): New variable.
	(toplevel): Detect w3m version.
	(w3m-user-agent): New user option.
	(w3m-add-user-agent): Ditto.
	(w3m-w3m-retrieve): Add User-Agent: field if w3m-add-user-agent is
	non-nil.

	* w3m-e21.el (w3m-tab-drag-mouse-function): New function.
	(w3m-tab-make-keymap): Add mouse-1, mouse-2, drag-mouse-1 and
	drag-mouse-2.

	* w3m-cookie.el (w3m-cookie-set): Fixed docstring.

2002-03-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (w3m-find-coding-system): Alias to ignore if the
	function `find-coding-system' is not available.
	(w3m-make-ccl-coding-system): Check whether the function
	`make-ccl-coding-system' is available instead of checking the
	feature `mule' to determine what function should be aliased to.
	(coding-system-list): Alias to ignore if it is not available.
	(define-ccl-program): Check whether it is available instead of
	checking the feature `mule' to determine if it is aliased to
	`ignore'.
	(w3m-detect-coding-with-priority): Quote
	`w3m-default-coding-system'.

2002-03-24  Nix  <nix@esperi.demon.co.uk>

	* w3m-xmas.el (w3m-detect-coding-with-priority): New macro, handle
	non-MULE XEmacsen.
	(w3m-detect-coding-region): Use it.

2002-03-26  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-cookie.el (w3m-cookie-1-set): Fixed problem when no `Expires',
	ignore is ignored.

2002-03-26  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-cookie.el (w3m-cookie-url, w3m-cookie-domain,
	w3m-cookie-secure, w3m-cookie-name, w3m-cookie-value,
	w3m-cookie-path, w3m-cookie-version, w3m-cookie-expires,
	w3m-cookie-ignore): Define as macro.
	(w3m-cookie-set-url, w3m-cookie-set-domain, w3m-cookie-set-secure,
	w3m-cookie-set-name, w3m-cookie-set-value, w3m-cookie-set-path,
	w3m-cookie-set-version, w3m-cookie-set-expires,
	w3m-cookie-set-ignore): Removed.
	(w3m-cookie-create): New implementation.
	(w3m-about-cookie): Call `setf' instead of `w3m-cookie-set-ignore'.

2002-03-26  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-fontify-anchors): Changed anchor name property position.
	(w3m-lynx-like-map): Bind w3m-cookie as `M-k'.
	(w3m-info-like-map): Ditto.

2002-03-26  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-cookie.el (w3m-cookie-save): Use `w3m-time-newer-p' instead of
	`w3m-time-lapse-seconds'.

2002-03-26  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-cookie.el (w3m-cookie): New command.
	(w3m-about-cookie): Do nothing if w3m-use-cookies is nil.

	* w3m.el (toplevel): Added autoload setting for w3m-about-cookie;
	Added autoload setting for w3m-cookie.

	* w3m-cookie.el (w3m-cookie-store): Don't replace if ignored cookie.
	(w3m-cookie-retrieve): Don't use cookie which is ignored.
	(w3m-about-cookie): New function.

	* w3m-e21.el (w3m-setup-favicon): Do nothing when w3m-current-url
	is nil.

	* w3m.el (w3m-goto-url): Force reload if w3m-current-redirect is set.
	(w3m): If w3m-current-url is nil, erase buffer.

	* w3m-util.el (w3m-time-less-p): Abolish.
	(w3m-assoc-ignore-case): Moved from w3m-cookie.el and rewrote not to
	use assoc* (because it's cl function).

	* w3m-cookie.el (w3m-cookie-retrieve): Use w3m-time-newer-p instead of
	w3m-time-less-p.
	(w3m-cookie-1-set): Ditto.
	(w3m-assoc-ignore-case): Moved to w3m-util.el.

2002-03-25  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-cookie.el (w3m-cookie-1-set): Use w3m-time-less-p instead of
	w3m-time-lapse-seconds.
	(w3m-cookie-retrieve): Ditto.

	* w3m-util.el (w3m-time-less-p): New inline function.

	* w3m.el (w3m-current-redirect): New buffer local variable.
	(w3m-clear-local-variables): Add w3m-current-redirect.
	(w3m-copy-local-variables): Treat w3m-current-redirect.
	(w3m-w3m-attributes): Set w3m-current-redirect instead of
	w3m-current-refresh when 30x response.
	(w3m-prepare-content): Use w3m-current-redirect instead of
	w3m-current-refresh.
	(w3m-goto-url): Do nothing but w3m-goto-url after retrieval if
	w3m-current-redirect is set.

2002-03-25  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-cookie.el (w3m-cookie-file): Changed default value.
	(w3m-cookie-save): Follow the above change.
	(w3m-cookie-load): Ditto.

2002-03-25  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-w3m-attributes): Don't call w3m-cookie-set.
	(w3m-w3m-dump-head-source): Call w3m-cookie-set.
	(w3m-cookie-command-arguments): Set `-no-cookie';
	Don't set cookie_accept_domains, cookie_reject_domains.

	* w3m-cookie.el (toplevel): Require 'w3m.
	(w3m-cookie-accept-domains): Moved from w3m.el.
	(w3m-cookie-reject-domains): Ditto.
	(w3m-cookie-accept-bad-cookies): New user option.
	(w3m-cookie-file): Ditto.
	(w3m-cookie-set-ignore): Fix.
	(w3m-cookie-retrieve): Remove expired cookies.
	(w3m-cookie-trusted-host-p): Fixed domain match.
	(w3m-cookie-1-set): Treat all cookies.
	Accept bad cookies according to w3m-cookie-accept-bad-cookies.
	(w3m-cookie-init): New variable.
	(w3m-cookie-clear): New function.
	(w3m-cookie-save): Ditto.
	(w3m-cookie-load): Ditto.
	(w3m-cookie-setup): Ditto.
	(w3m-cookie-shutdown): Rewrite.
	(w3m-cookie-set): Call w3m-cookie-setup; Changed API.
	(w3m-cookie-get): Call w3m-cookie-setup.

	* w3m.el (w3m-goto-url): Don't resume form from history when POST.

2002-03-24  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-cookie.el: New file.

	* w3m-form.el (w3m-form-resume): Use cdr of forms if car is t
	(Just in case).
	(w3m-form-parse-and-fontify)[w3m]: Search form structure according
	to fid.

	* w3m.el (toplevel): Added autoload setting for w3m-cookie.
	(w3m-use-cookies): New user option.
	(w3m-cookie-accept-domains): Ditto.
	(w3m-cookie-reject-domains): Ditto.
	(toplevel): Bind system-time-locale as "C" while calling
	format-time-string.
	(w3m-w3m-attributes): Call w3m-cookie-set;
	When 30x response is received, set w3m-current-refresh as
	(0 . Location).
	(w3m-cookie-command-arguments): New function.
	(w3m-w3m-retrieve): Use it.
	(w3m-retrieve-and-render): Mark w3m-current-forms as `not history'
	if retrieval failed.
	(w3m-prepare-content): If w3m-current-refresh rate is 0, do nothing.
	(w3m-quit): Call `w3m-cookie-shutdown'.

2002-03-24  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-decode-encoded-contents): Convert encoding to lower
	case before checking alist.

2002-03-24  SAITO Takuya <reed@lily.freemail.ne.jp>

	* shimbun/sb-yahoo.el (shimbun-get-headers): Changed date format.

2002-03-24  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-remove-redundant-spaces): New implementation.
	(w3m-about-retrieve): Call `insert-buffer-substring' instead of
	`insert-buffer'.
	(w3m-rendering-unibyte-buffer): Ditto.
	(w3m-rendering-multibyte-buffer): Ditto.
	(w3m-prepare-text-content): Ditto.

	* shimbun/shimbun.el (shimbun-retrieve-url-buffer): Removed.
	(shimbun-headers): Call `shimbun-retrieve-url' instead of
	`shimbun-retrieve-url-buffer'.

	* shimbun/sb-ding.el (shimbun-get-headers): New method.

	* shimbun/sb-glimpse.el (shimbun-get-headers): Retrieve a decoded
	content.

	* shimbun/sb-gnome.el (shimbun-ding-coding-system): Abolished.
	(shimbun-get-headers): Retrieve a decoded content.

	* shimbun/sb-hns.el (shimbun-hns-article): Call
	`shimbun-retrieve-url' instead of `shimbun-retrieve-url-buffer'.

	* shimbun/sb-tcup.el (shimbun-headers): Call
	`shimbun-retrieve-url' instead of `shimbun-retrieve-url-buffer'.

	* shimbun/sb-wired.el (shimbun-get-group-header-alist): Call
	`shimbun-retrieve-url' instead of `shimbun-retrieve-url-buffer'.

	* shimbun/sb-yahoo.el (shimbun-get-headers): Call
	`shimbun-retrieve-url' instead of `shimbun-retrieve-url-buffer'.

	* shimbun/sb-zdnet.el (shimbun-make-contents): New method to
	remove all advertisements.

2002-03-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-w3m-attributes): Ignore trailing whitespaces in
	header lines.

2002-03-20  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-view-this-url): Eval action even when anchor is set.

	* w3m-form.el (w3m-form-parse-and-fontify): Clear mapval if it is set.

	* w3m.el (w3m-halfdump-command-arguments)[w3mmee]: Add `image'
	to the -dump argument only if `w3m-treat-image-size' is non-nil.

2002-03-20  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-form.el (w3m-form-parse-and-fontify): If not detect `usemap'
	attribute of `img_alt', use `value' attribute of `input_alt' for
	the select map name; W3M removes `usemap' attribute when
	"display_image=off".

2002-03-19  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-w3m-attributes): Ignore `w3m-document-charset' when
	w3m-m17n.

2002-03-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-fontify-images): Parse width and height attributes of
	img_alt.
	(w3m-toggle-inline-images-internal): Set `size' argument of
	w3m-create-image.
	(w3m-highlight-current-anchor): Fixed logic.

	* w3m-xmas.el (w3m-create-image): Added optional argument `size'
	(ignored currently).

	* w3m-e21.el (w3m-imagick-convert-program): Use w3m-which to set
	initial value.
	(w3m-resize-images): New user option.
	(w3m-resize-image): New function.
	(w3m-create-image): Added optional argument `size'; Changed return
	value.
	(w3m-insert-image): Call w3m-resize-image if size is specified.
	(w3m-imagick-convert-buffer): Accept nil for from-type and to-type.

2002-03-18  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-form-mee-select-value): Fix.
	(w3m-form-parse-and-fontify): If w3m-type is not w3mmee, use last
	form object as current form.

2002-03-18  KAMO Tomoyuki  <kamo@ITmanage.co.jp>

	* shimbun/sb-tcup.el (shimbun-tcup-get-group-key): Follow the
	structual change of the master site.
	(shimbun-tcup-make-id): Ditto.

2002-03-18  Masamichi Goudge M.D. <Matanuki@Goudge.org>

	* shimbun/sb-orca.el: New file.

2002-03-18  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-highlight-current-anchor): New implementation.
	(w3m-highlight-current-anchor-1): New function.

	* w3m-form.el (w3m-form-replace): Fixed problem when string is nil.

2002-03-16  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-string-to-char-list): Fixed.

2002-03-13  SAITO Takuya <reed@lily.freemail.ne.jp>

	* shimbun/sb-ruby.el (shimbun-get-headers): Make regexp
	more flexible.

2002-03-15  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-form-mee-select-value): Use w3m-output-coding-system
	instead of w3m-current-coding-system.
	(w3m-form-parse-and-fontify)[w3mmee]: Ditto.
	(w3m-form-mee-select-value): Fixed select value.
	(w3m-form-resume): Fixed checkbox resuming.
	(w3m-form-parse-and-fontify): Use `form' instead of `(car forms)';
	Search the form which corresponds to input_alt by fid;
	Use `nconc' instead of `push'.

	* w3m-form.el (w3m-form-mee-select-value): New function.
	(w3m-form-parse-and-fontify)[w3mmee]: Set select value.

	* w3m.el (w3m-halfdump-command-arguments)[w3mmee]: Added image.

	* w3m-form.el (w3m-form-parse-and-fontify): Set the value of form
	only if the method is not internal;
	Add internal form to the w3m-current-forms;
	Treat input type `image' as same as `submit'.
	(w3m-form-mee-attr-unquote): New function.
	(w3m-string-to-char-list): New function/alias.
	(w3m-form-mee-new): New function.
	(w3m-form-parse-and-fontify): Parse w3mmee's form info.
	(w3m-form-input-textarea-keymap): Bind C-g.
	(w3m-form-input-select-keymap): Bind C-g, h,j,k,l.
	(w3m-form-input-map-keymap): Ditto.
	(w3m-form-parse-and-fontify): Set textarea value.

2002-03-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-form.el (w3m-form-resume): Typo.

2002-03-13  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (toplevel): Removed autoload setting for
	`w3m-form-parse-buffer'.
	(w3m-clear-local-variables): Don't treat w3m-current-forms any more.
	(w3m-copy-local-variables): Ditto.
	(w3m-additional-command-arguments): Fixed problem when no-proxy host
	has port number other than 80.
	(w3m-rendering-buffer-1): Don't call w3m-form-parse-buffer.
	(w3m-goto-url): Setup w3m-current-forms from history structure.

	* w3m-form.el (w3m-form-parse-buffer): Abolish.
	(w3m-form-parse-forms): Ditto.
	(w3m-form-resume): Set value of `w3m-current-forms'.
	(w3m-fontify-forms): Call `w3m-form-parse-and-fontify' instead of
	`w3m-form-fontify'.
	(w3m-form-parse-and-fontify): New function.
	(w3m-form-input-select): Fix problem when candidate label is "".

2002-03-13  Katsumi Yamaoka  <yamaoka@jpl.org>
	Suggested by HAYASHI Chifumi <chifumi@mscom.or.jp>.

	* w3m-form.el (w3m-form-new): Ignore the 2nd arg `action' if it is
	nil.
	(w3m-form-parse-forms): Don't parse the value of `w3m-current-url'
	if it is nil.

2002-03-13  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (mew-shimbun-mode-display): Remove
	no meaning `force-mode-line-update'.
	(mew-shimbun-scan): Change to inline function and an
	argument. Add to support Mew's new `mew-local-retrieve' function.
	(mew-shimbun-retrieve, mew-shimbun-retrieve-all)
	(mew-shimbun-re-retrieve, mew-shimbun-re-retrieve-all)
	(mew-shimbun-unseen-check): Call `mew-shimbun-scan' with folder
	name.

2002-03-12  SAITO Takuya <reed@lily.freemail.ne.jp>

	* shimbun/sb-ruby.el (shimbun-index-url): Search articles
	from `(point-max)' for checking all articles.

2002-03-12  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Release emacs-w3m-1.2.6 from emacs-w3m-1_2 branch.

2002-03-11  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m-ucs.el (w3m-euc-japan-encoder): Treat japanese-jisx0208-1978
	as japanese-jisx0208.

	* shimbun/sb-digiko.el (shimbun-get-headers): Fixed regexp.
	* shimbun/sb-h14m.el (shimbun-get-headers): Ditto.
	* shimbun/sb-mew.el (shimbun-get-headers): Ditto.

2002-03-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-view-this-url, w3m-goto-url-new-session,
	w3m-select-buffer-copy-buffer): Remove unused non-global variables.

2002-03-11  Katsumi Yamaoka  <yamaoka@jpl.org>
	Suggested by Yuuichi Teranishi <teranisi@gohome.org> with mod.

	* w3m.el (w3m-no-proxy-domains): New user option renamed from
	`w3m-no-proxy-hosts' and changed the meaning.
	(w3m-additional-command-arguments): Refer to it.

2002-03-10  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Makefile.in (tarball): Fix permissions.

2002-03-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-command-arguments-alist): Change the meaning that
	the car of each element will be compared with a url instead of a
	hostname.
	(w3m-no-proxy-hosts): New user option.
	(w3m-additional-command-arguments): Look into it.

2002-03-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-command-arguments-alist): New user option.
	(w3m-additional-command-arguments): New function.
	(w3m-w3m-retrieve): Use it.
	(w3m-history-current-url-face, w3m-copy-buffer, w3m-about-header):
	Remove unused non-global variables.

2002-03-08  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-w3m-attributes) [w3mmee]: Fetch content-encoding from
	"x-w3m-content-encoding" filed.

	* shimbun/sb-impress.el (shimbun-impress-groups-alist): Follow
	the change of PC Watch page.

2002-03-07  Hideyuki SHIRAI  <shirai@meadowy.org>

	* mew-w3m.el (mew-w3m-cid-retrieve): Return lowercase string
	always because `w3m-image-type-alist' has lowercase keys.

2002-03-07  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* w3m.el (w3m-lynx-like-map): Switch J and K so as to behave like
	w3m.

2002-03-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* aclocal.m4 (AC_EXAMINE_PACKAGEDIR): Use `(eq 0 foo)' instead of
	`(zerop foo)' because foo might not be a number.
	(AC_PATH_ICONDIR): Ditto.

2002-03-07  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-decoder-alist): Change default commands to `gzip' and
	`bzip2' instead of `gunzip' and `bunzip2' because some broken OS
	and its environment does not work them.

2002-03-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (datadir): New variable.

2002-03-06  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-proc.el (w3m-process-filter): Modify a regexp for "Password:".

2002-03-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (install): Don't chdir to shimbun/ while installing
	shimbun modules.
	(install-icons): Don't chdir to icons/ while installing icons.

2002-03-06  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (top): Define `mew-folder-list' and
	`mew-local-folder-list' to avoid byte-compile warings.
	(mew-shimbun-goto-folder): Support Mew 3.0.54 or later.

2002-03-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (install): Install all ChangeLog files.
	* w3mhack.el (w3mhack-make-package): List all ChangeLog files
	in the manifest.

2002-03-05  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-local-dirlist-cgi): Set `w3m-current-url' for avoid
	error in `w3m-process-start-process()'.
	(w3m-goto-url): When use w3m-dtree and the URL is local directory,
	change the URL to `about://dtree' securely.

2002-03-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-util.el (w3m-function-max-args): Alias to `function-max-args'
	under XEmacs, otherwise define it as a function.
	(symbol-for-testing-whether-colon-keyword-is-available-or-not):
	Use `dont-compile' instead of `eval'.

	* shimbun/mew-shimbun.el (mew-shimbun-goto-folder): Use
	`w3m-function-max-args' to examine how many arguments does
	`mew-summary-ls' take; use `dont-compile' to call `mew-summary-ls'
	with two arguments.

2002-03-02  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Release emacs-w3m-1.2.5 from emacs-w3m-1_2 branch.

2002-03-01  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (mew-shimbun-retrieve-article)
	(mew-shimbun-re-retrieve-article): Sort headers by the date.

	* shimbun/sb-slashdot-jp.el
	(shimbun-slashdot-jp-parse-date-string): `12PM' means noon.
	'12AM' means at night.

2002-03-01  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-lump.el (shimbun-lump): Add `check-interval'.
	(shimbun-lump-check-interval): New inline function.
	(shimbun-lump-check-p): Use it.

2002-03-01  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-slashdot-jp.el (shimbun-slashdot-jp-story-count): New
	internal constant.
	(shimbun-slashdot-jp-make-headers): The action when range is not
	set is changed.  Search old stories.
	(shimbun-index-url): Removed.
	(shimbun-slashdot-jp-make-story-headers): Change argument spec.
	Refer the above constant to decide the URL of the index page.
	(shimbun-slashdot-jp-search-comment-head): Ignore a garbage line
	between author and date.

2002-03-01  Yuuichi Teranishi  <teranisi@gohome.org>

	* octet.el (octet-find-file): Decode even in the read-only buffer.

2002-03-01  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-lump.el (shimbun-get-group-header-alist): Add the 2nd
	optional argument.
	(shimbun-headers): Call the above function with the 2nd argument.

	* shimbun/sb-wired.el (shimbun-get-group-header-alist): Ignore the
	2nd optional argument.

	* shimbun/sb-slashdot-jp.el: Inherit sb-lump.el.
	(shimbun-headers): Abolished.
	(shimbun-get-group-header-alist): New method.
	(shimbun-slashdot-jp-make-headers): New function.

	* shimbun/sb-slashdot-jp.el (shimbun-make-contents): Bind
	`case-fold-search' to t locally.
	(shimbun-headers): Ditto.

2002-03-01  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (mew-shimbun-goto-folder): Follow up
	changes of Mew 3.x.

2002-03-01  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-slashdot-jp.el (shimbun-slashdot-jp-threshold):
	Change its customize spec.
	(shimbun-slashdot-jp-sid-url): Follow the above change.
	(shimbun-headers): Ditto.
	(shimbun-slashdot-jp-make-comment-headers): Reverse order.
	(shimbun-slashdot-jp-parse-date-string): Fix.

	* shimbun/sb-slashdot-jp.el (shimbun-make-contents): Follow the
	argument spec change of `shimbun-slashdot-jp-make-story-article'.
	(shimbun-slashdot-jp-make-story-article): Not accept the 2nd
	argument.  Use `shimbun-header-xref' instead of
	`shimbun-slashdot-jp-sid-url' when the URL of the article is
	calulated, in order to protect the change of
	`shimbun-slashdot-jp-threshold'.
	(shimbun-slashdot-jp-make-comment-article): Use
	`shimbun-header-xref' instead of `shimbun-slashdot-jp-sid-url' as
	stated above.
	(shimbun-slashdot-jp-search-comment-head): Only when the 4th
	argument is set, references are checked.

2002-02-28  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-slashdot-jp.el (shimbun-slashdot-jp-threshold): New
	variable.
	(shimbun-slashdot-jp-sid-url): Refer it.
	(shimbun-slashdot-jp-make-comment-headers): Check all articles.
	(shimbun-slashdot-jp-search-comment-head): The message ID of the
	parent article is also added to References:.

	* shimbun/sb-slashdot-jp.el: All stuffs are rewritten.

	* shimbun/sb-mhonarc.el (shimbun-make-contents): Modified regexp.

2002-02-27  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-mhonarc.el (shimbun-make-contents): Protect against a
	date string which has both of numerical timezone and country.

2002-02-26  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Makefile.in (DOCS): Add ChangeLog.1.


Local Variables:
coding: iso-2022-7bit
End:
